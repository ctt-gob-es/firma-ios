//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/desarrolloabamobile/Downloads/jmulticard-ios/src/main/java/org/bouncycastle/pqc/math/ntru/util/Util.java
//

#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/io/IOException.h"
#include "java/io/InputStream.h"
#include "java/lang/Integer.h"
#include "java/lang/System.h"
#include "java/security/SecureRandom.h"
#include "java/util/ArrayList.h"
#include "java/util/Collections.h"
#include "java/util/List.h"
#include "org/bouncycastle/pqc/math/ntru/euclid/IntEuclidean.h"
#include "org/bouncycastle/pqc/math/ntru/polynomial/DenseTernaryPolynomial.h"
#include "org/bouncycastle/pqc/math/ntru/polynomial/SparseTernaryPolynomial.h"
#include "org/bouncycastle/pqc/math/ntru/polynomial/TernaryPolynomial.h"
#include "org/bouncycastle/pqc/math/ntru/util/Util.h"
#include "org/bouncycastle/util/Integers.h"

#if !__has_feature(objc_arc)
#error "org/bouncycastle/pqc/math/ntru/util/Util must be compiled with ARC (-fobjc-arc)"
#endif

inline jboolean OrgBouncycastlePqcMathNtruUtilUtil_get_IS_64_BITNESS_KNOWN(void);
inline jboolean OrgBouncycastlePqcMathNtruUtilUtil_set_IS_64_BITNESS_KNOWN(jboolean value);
static volatile_jboolean OrgBouncycastlePqcMathNtruUtilUtil_IS_64_BITNESS_KNOWN;
J2OBJC_STATIC_FIELD_PRIMITIVE_VOLATILE(OrgBouncycastlePqcMathNtruUtilUtil, IS_64_BITNESS_KNOWN, jboolean)

inline jboolean OrgBouncycastlePqcMathNtruUtilUtil_get_IS_64_BIT_JVM(void);
inline jboolean OrgBouncycastlePqcMathNtruUtilUtil_set_IS_64_BIT_JVM(jboolean value);
static volatile_jboolean OrgBouncycastlePqcMathNtruUtilUtil_IS_64_BIT_JVM;
J2OBJC_STATIC_FIELD_PRIMITIVE_VOLATILE(OrgBouncycastlePqcMathNtruUtilUtil, IS_64_BIT_JVM, jboolean)

#line 1 "/Users/desarrolloabamobile/Downloads/jmulticard-ios/src/main/java/org/bouncycastle/pqc/math/ntru/util/Util.java"


#line 16
@implementation OrgBouncycastlePqcMathNtruUtilUtil

J2OBJC_IGNORE_DESIGNATED_BEGIN

#line 16
- (instancetype)init {
  OrgBouncycastlePqcMathNtruUtilUtil_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END


#line 24
+ (jint)invertWithInt:(jint)n
              withInt:(jint)modulus {
  return OrgBouncycastlePqcMathNtruUtilUtil_invertWithInt_withInt_(n, modulus);
}


#line 37
+ (jint)powWithInt:(jint)a
           withInt:(jint)b
           withInt:(jint)modulus {
  return OrgBouncycastlePqcMathNtruUtilUtil_powWithInt_withInt_withInt_(a, b, modulus);
}


#line 50
+ (jlong)powWithLong:(jlong)a
             withInt:(jint)b
            withLong:(jlong)modulus {
  return OrgBouncycastlePqcMathNtruUtilUtil_powWithLong_withInt_withLong_(a, b, modulus);
}


#line 70
+ (id<OrgBouncycastlePqcMathNtruPolynomialTernaryPolynomial>)generateRandomTernaryWithInt:(jint)N
                                                                                  withInt:(jint)numOnes
                                                                                  withInt:(jint)numNegOnes
                                                                              withBoolean:(jboolean)sparse
                                                             withJavaSecuritySecureRandom:(JavaSecuritySecureRandom *)random {
  return OrgBouncycastlePqcMathNtruUtilUtil_generateRandomTernaryWithInt_withInt_withInt_withBoolean_withJavaSecuritySecureRandom_(N, numOnes, numNegOnes, sparse, random);
}


#line 91
+ (IOSIntArray *)generateRandomTernaryWithInt:(jint)N
                                      withInt:(jint)numOnes
                                      withInt:(jint)numNegOnes
                 withJavaSecuritySecureRandom:(JavaSecuritySecureRandom *)random {
  return OrgBouncycastlePqcMathNtruUtilUtil_generateRandomTernaryWithInt_withInt_withInt_withJavaSecuritySecureRandom_(N, numOnes, numNegOnes, random);
}


#line 126
+ (jboolean)is64BitJVM {
  return OrgBouncycastlePqcMathNtruUtilUtil_is64BitJVM();
}


#line 148
+ (IOSByteArray *)readFullLengthWithJavaIoInputStream:(JavaIoInputStream *)is
                                              withInt:(jint)length {
  return OrgBouncycastlePqcMathNtruUtilUtil_readFullLengthWithJavaIoInputStream_withInt_(is, length);
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x9, 0, 1, -1, -1, -1, -1 },
    { NULL, "I", 0x9, 2, 3, -1, -1, -1, -1 },
    { NULL, "J", 0x9, 2, 4, -1, -1, -1, -1 },
    { NULL, "LOrgBouncycastlePqcMathNtruPolynomialTernaryPolynomial;", 0x9, 5, 6, -1, -1, -1, -1 },
    { NULL, "[I", 0x9, 5, 7, -1, -1, -1, -1 },
    { NULL, "Z", 0x9, -1, -1, -1, -1, -1, -1 },
    { NULL, "[B", 0x9, 8, 9, 10, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(init);
  methods[1].selector = @selector(invertWithInt:withInt:);
  methods[2].selector = @selector(powWithInt:withInt:withInt:);
  methods[3].selector = @selector(powWithLong:withInt:withLong:);
  methods[4].selector = @selector(generateRandomTernaryWithInt:withInt:withInt:withBoolean:withJavaSecuritySecureRandom:);
  methods[5].selector = @selector(generateRandomTernaryWithInt:withInt:withInt:withJavaSecuritySecureRandom:);
  methods[6].selector = @selector(is64BitJVM);
  methods[7].selector = @selector(readFullLengthWithJavaIoInputStream:withInt:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "IS_64_BITNESS_KNOWN", "Z", .constantValue.asLong = 0, 0x4a, -1, 11, -1, -1 },
    { "IS_64_BIT_JVM", "Z", .constantValue.asLong = 0, 0x4a, -1, 12, -1, -1 },
  };
  static const void *ptrTable[] = { "invert", "II", "pow", "III", "JIJ", "generateRandomTernary", "IIIZLJavaSecuritySecureRandom;", "IIILJavaSecuritySecureRandom;", "readFullLength", "LJavaIoInputStream;I", "LJavaIoIOException;", &OrgBouncycastlePqcMathNtruUtilUtil_IS_64_BITNESS_KNOWN, &OrgBouncycastlePqcMathNtruUtilUtil_IS_64_BIT_JVM };
  static const J2ObjcClassInfo _OrgBouncycastlePqcMathNtruUtilUtil = { "Util", "org.bouncycastle.pqc.math.ntru.util", ptrTable, methods, fields, 7, 0x1, 8, 2, -1, -1, -1, -1, -1 };
  return &_OrgBouncycastlePqcMathNtruUtilUtil;
}

@end


#line 16
void OrgBouncycastlePqcMathNtruUtilUtil_init(OrgBouncycastlePqcMathNtruUtilUtil *self) {
  NSObject_init(self);
}


#line 16
OrgBouncycastlePqcMathNtruUtilUtil *new_OrgBouncycastlePqcMathNtruUtilUtil_init() {
  J2OBJC_NEW_IMPL(OrgBouncycastlePqcMathNtruUtilUtil, init)
}


#line 16
OrgBouncycastlePqcMathNtruUtilUtil *create_OrgBouncycastlePqcMathNtruUtilUtil_init() {
  J2OBJC_CREATE_IMPL(OrgBouncycastlePqcMathNtruUtilUtil, init)
}


#line 24
jint OrgBouncycastlePqcMathNtruUtilUtil_invertWithInt_withInt_(jint n, jint modulus) {
  OrgBouncycastlePqcMathNtruUtilUtil_initialize();
  n %= modulus;
  if (n < 0) {
    
#line 29
    n += modulus;
  }
  return ((OrgBouncycastlePqcMathNtruEuclidIntEuclidean *) nil_chk(OrgBouncycastlePqcMathNtruEuclidIntEuclidean_calculateWithInt_withInt_(n, modulus)))->x_;
}


#line 37
jint OrgBouncycastlePqcMathNtruUtilUtil_powWithInt_withInt_withInt_(jint a, jint b, jint modulus) {
  OrgBouncycastlePqcMathNtruUtilUtil_initialize();
  jint p = 1;
  for (jint i = 0; i < b; i++) {
    
#line 42
    p = JreIntMod((p * a), modulus);
  }
  return p;
}


#line 50
jlong OrgBouncycastlePqcMathNtruUtilUtil_powWithLong_withInt_withLong_(jlong a, jint b, jlong modulus) {
  OrgBouncycastlePqcMathNtruUtilUtil_initialize();
  jlong p = 1;
  for (jint i = 0; i < b; i++) {
    
#line 55
    p = JreLongMod((p * a), modulus);
  }
  return p;
}


#line 70
id<OrgBouncycastlePqcMathNtruPolynomialTernaryPolynomial> OrgBouncycastlePqcMathNtruUtilUtil_generateRandomTernaryWithInt_withInt_withInt_withBoolean_withJavaSecuritySecureRandom_(jint N, jint numOnes, jint numNegOnes, jboolean sparse, JavaSecuritySecureRandom *random) {
  OrgBouncycastlePqcMathNtruUtilUtil_initialize();
  if (sparse) {
    
#line 74
    return OrgBouncycastlePqcMathNtruPolynomialSparseTernaryPolynomial_generateRandomWithInt_withInt_withInt_withJavaSecuritySecureRandom_(N, numOnes, numNegOnes, random);
  }
  else {
    
#line 78
    return OrgBouncycastlePqcMathNtruPolynomialDenseTernaryPolynomial_generateRandomWithInt_withInt_withInt_withJavaSecuritySecureRandom_(N, numOnes, numNegOnes, random);
  }
}


#line 91
IOSIntArray *OrgBouncycastlePqcMathNtruUtilUtil_generateRandomTernaryWithInt_withInt_withInt_withJavaSecuritySecureRandom_(jint N, jint numOnes, jint numNegOnes, JavaSecuritySecureRandom *random) {
  OrgBouncycastlePqcMathNtruUtilUtil_initialize();
  JavaLangInteger *one = OrgBouncycastleUtilIntegers_valueOfWithInt_(1);
  JavaLangInteger *minusOne = OrgBouncycastleUtilIntegers_valueOfWithInt_(-1);
  JavaLangInteger *zero = OrgBouncycastleUtilIntegers_valueOfWithInt_(0);
  
#line 97
  id<JavaUtilList> list = new_JavaUtilArrayList_init();
  for (jint i = 0; i < numOnes; i++) {
    
#line 100
    [list addWithId:one];
  }
  for (jint i = 0; i < numNegOnes; i++) {
    
#line 104
    [list addWithId:minusOne];
  }
  while ([list size] < N) {
    
#line 108
    [list addWithId:zero];
  }
  
#line 111
  JavaUtilCollections_shuffleWithJavaUtilList_withJavaUtilRandom_(list, random);
  
#line 113
  IOSIntArray *arr = [IOSIntArray newArrayWithLength:N];
  for (jint i = 0; i < N; i++) {
    
#line 116
    *IOSIntArray_GetRef(arr, i) = [((JavaLangInteger *) nil_chk(((JavaLangInteger *) cast_chk([list getWithInt:i], [JavaLangInteger class])))) intValue];
  }
  return arr;
}


#line 126
jboolean OrgBouncycastlePqcMathNtruUtilUtil_is64BitJVM() {
  OrgBouncycastlePqcMathNtruUtilUtil_initialize();
  if (!JreLoadVolatileBoolean(&OrgBouncycastlePqcMathNtruUtilUtil_IS_64_BITNESS_KNOWN)) {
    
#line 130
    NSString *arch = JavaLangSystem_getPropertyWithNSString_(@"os.arch");
    NSString *sunModel = JavaLangSystem_getPropertyWithNSString_(@"sun.arch.data.model");
    JreAssignVolatileBoolean(&OrgBouncycastlePqcMathNtruUtilUtil_IS_64_BIT_JVM, [@"amd64" isEqual:arch] || [@"x86_64" isEqual:arch] || [@"ppc64" isEqual:arch] || [@"64" isEqual:sunModel]);
    JreAssignVolatileBoolean(&OrgBouncycastlePqcMathNtruUtilUtil_IS_64_BITNESS_KNOWN, true);
  }
  return JreLoadVolatileBoolean(&OrgBouncycastlePqcMathNtruUtilUtil_IS_64_BIT_JVM);
}


#line 148
IOSByteArray *OrgBouncycastlePqcMathNtruUtilUtil_readFullLengthWithJavaIoInputStream_withInt_(JavaIoInputStream *is, jint length) {
  OrgBouncycastlePqcMathNtruUtilUtil_initialize();
  
#line 151
  IOSByteArray *arr = [IOSByteArray newArrayWithLength:length];
  if ([((JavaIoInputStream *) nil_chk(is)) readWithByteArray:arr] != arr->size_) {
    
#line 154
    @throw new_JavaIoIOException_initWithNSString_(@"Not enough bytes to read.");
  }
  return arr;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgBouncycastlePqcMathNtruUtilUtil)
