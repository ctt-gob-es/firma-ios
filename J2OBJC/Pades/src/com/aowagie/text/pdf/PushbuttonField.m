//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/desarrolloabamobile/Documents/JAVA/pades-ios/src/main/java/com/aowagie/text/pdf/PushbuttonField.java
//

#include "J2ObjC_source.h"
#include "com/aowagie/text/Image.h"
#include "com/aowagie/text/Rectangle.h"
#include "com/aowagie/text/pdf/BaseField.h"
#include "com/aowagie/text/pdf/BaseFont.h"
#include "com/aowagie/text/pdf/PRIndirectReference.h"
#include "com/aowagie/text/pdf/PdfAnnotation.h"
#include "com/aowagie/text/pdf/PdfAppearance.h"
#include "com/aowagie/text/pdf/PdfArray.h"
#include "com/aowagie/text/pdf/PdfBorderDictionary.h"
#include "com/aowagie/text/pdf/PdfContentByte.h"
#include "com/aowagie/text/pdf/PdfDashPattern.h"
#include "com/aowagie/text/pdf/PdfDictionary.h"
#include "com/aowagie/text/pdf/PdfFormField.h"
#include "com/aowagie/text/pdf/PdfName.h"
#include "com/aowagie/text/pdf/PdfNumber.h"
#include "com/aowagie/text/pdf/PdfObject.h"
#include "com/aowagie/text/pdf/PdfReader.h"
#include "com/aowagie/text/pdf/PdfTemplate.h"
#include "com/aowagie/text/pdf/PdfWriter.h"
#include "com/aowagie/text/pdf/PushbuttonField.h"
#include "harmony/java/awt/Color.h"
#include "java/lang/Float.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/Math.h"

#if !__has_feature(objc_arc)
#error "com/aowagie/text/pdf/PushbuttonField must be compiled with ARC (-fobjc-arc)"
#endif

@interface ComAowagieTextPdfPushbuttonField () {
 @public
  /*!
   @brief Holds value of property layout.
   */
  jint layout_;
  /*!
   @brief Holds value of property image.
   */
  ComAowagieTextImage *image_;
  /*!
   @brief Holds value of property template.
   */
  ComAowagieTextPdfPdfTemplate *template__;
  /*!
   @brief Holds value of property scaleIcon.
   */
  jint scaleIcon_;
  /*!
   @brief Holds value of property proportionalIcon.
   */
  jboolean proportionalIcon_;
  /*!
   @brief Holds value of property iconVerticalAdjustment.
   */
  jfloat iconVerticalAdjustment_;
  /*!
   @brief Holds value of property iconHorizontalAdjustment.
   */
  jfloat iconHorizontalAdjustment_;
  /*!
   @brief Holds value of property iconFitToBounds.
   */
  jboolean iconFitToBounds_;
  ComAowagieTextPdfPdfTemplate *tp_;
  /*!
   @brief Holds value of property iconReference.
   */
  ComAowagieTextPdfPRIndirectReference *iconReference_;
}

- (jfloat)calculateFontSizeWithFloat:(jfloat)w
                           withFloat:(jfloat)h;

@end

J2OBJC_FIELD_SETTER(ComAowagieTextPdfPushbuttonField, image_, ComAowagieTextImage *)
J2OBJC_FIELD_SETTER(ComAowagieTextPdfPushbuttonField, template__, ComAowagieTextPdfPdfTemplate *)
J2OBJC_FIELD_SETTER(ComAowagieTextPdfPushbuttonField, tp_, ComAowagieTextPdfPdfTemplate *)
J2OBJC_FIELD_SETTER(ComAowagieTextPdfPushbuttonField, iconReference_, ComAowagieTextPdfPRIndirectReference *)

/*!
 @brief A layout option
 */
inline jint ComAowagieTextPdfPushbuttonField_get_LAYOUT_LABEL_ONLY(void);
#define ComAowagieTextPdfPushbuttonField_LAYOUT_LABEL_ONLY 1
J2OBJC_STATIC_FIELD_CONSTANT(ComAowagieTextPdfPushbuttonField, LAYOUT_LABEL_ONLY, jint)

/*!
 @brief A layout option
 */
inline jint ComAowagieTextPdfPushbuttonField_get_LAYOUT_ICON_ONLY(void);
#define ComAowagieTextPdfPushbuttonField_LAYOUT_ICON_ONLY 2
J2OBJC_STATIC_FIELD_CONSTANT(ComAowagieTextPdfPushbuttonField, LAYOUT_ICON_ONLY, jint)

/*!
 @brief A layout option
 */
inline jint ComAowagieTextPdfPushbuttonField_get_LAYOUT_ICON_TOP_LABEL_BOTTOM(void);
#define ComAowagieTextPdfPushbuttonField_LAYOUT_ICON_TOP_LABEL_BOTTOM 3
J2OBJC_STATIC_FIELD_CONSTANT(ComAowagieTextPdfPushbuttonField, LAYOUT_ICON_TOP_LABEL_BOTTOM, jint)

/*!
 @brief A layout option
 */
inline jint ComAowagieTextPdfPushbuttonField_get_LAYOUT_LABEL_TOP_ICON_BOTTOM(void);
#define ComAowagieTextPdfPushbuttonField_LAYOUT_LABEL_TOP_ICON_BOTTOM 4
J2OBJC_STATIC_FIELD_CONSTANT(ComAowagieTextPdfPushbuttonField, LAYOUT_LABEL_TOP_ICON_BOTTOM, jint)

/*!
 @brief A layout option
 */
inline jint ComAowagieTextPdfPushbuttonField_get_LAYOUT_ICON_LEFT_LABEL_RIGHT(void);
#define ComAowagieTextPdfPushbuttonField_LAYOUT_ICON_LEFT_LABEL_RIGHT 5
J2OBJC_STATIC_FIELD_CONSTANT(ComAowagieTextPdfPushbuttonField, LAYOUT_ICON_LEFT_LABEL_RIGHT, jint)

/*!
 @brief A layout option
 */
inline jint ComAowagieTextPdfPushbuttonField_get_LAYOUT_LABEL_LEFT_ICON_RIGHT(void);
#define ComAowagieTextPdfPushbuttonField_LAYOUT_LABEL_LEFT_ICON_RIGHT 6
J2OBJC_STATIC_FIELD_CONSTANT(ComAowagieTextPdfPushbuttonField, LAYOUT_LABEL_LEFT_ICON_RIGHT, jint)

/*!
 @brief A layout option
 */
inline jint ComAowagieTextPdfPushbuttonField_get_LAYOUT_LABEL_OVER_ICON(void);
#define ComAowagieTextPdfPushbuttonField_LAYOUT_LABEL_OVER_ICON 7
J2OBJC_STATIC_FIELD_CONSTANT(ComAowagieTextPdfPushbuttonField, LAYOUT_LABEL_OVER_ICON, jint)

__attribute__((unused)) static jfloat ComAowagieTextPdfPushbuttonField_calculateFontSizeWithFloat_withFloat_(ComAowagieTextPdfPushbuttonField *self, jfloat w, jfloat h);

#line 1 "/Users/desarrolloabamobile/Documents/JAVA/pades-ios/src/main/java/com/aowagie/text/pdf/PushbuttonField.java"


#line 83
@implementation ComAowagieTextPdfPushbuttonField


#line 157
- (instancetype)initPackagePrivateWithComAowagieTextPdfPdfWriter:(ComAowagieTextPdfPdfWriter *)writer
                                     withComAowagieTextRectangle:(ComAowagieTextRectangle *)box
                                                    withNSString:(NSString *)fieldName {
  ComAowagieTextPdfPushbuttonField_initPackagePrivateWithComAowagieTextPdfPdfWriter_withComAowagieTextRectangle_withNSString_(self, writer, box, fieldName);
  return self;
}


#line 165
- (jint)getLayout {
  return self->layout_;
}


#line 177
- (void)setLayoutWithInt:(jint)layout {
  if (layout < ComAowagieTextPdfPushbuttonField_LAYOUT_LABEL_ONLY || layout > ComAowagieTextPdfPushbuttonField_LAYOUT_LABEL_OVER_ICON) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(@"Layout out of bounds.");
  }
  self->layout_ = layout;
}


#line 188
- (ComAowagieTextImage *)getImage {
  return self->image_;
}


#line 196
- (void)setImageWithComAowagieTextImage:(ComAowagieTextImage *)image {
  self->image_ = image;
  self->template__ = nil;
}


#line 205
- (ComAowagieTextPdfPdfTemplate *)getTemplate {
  return self->template__;
}


#line 213
- (void)setTemplateWithComAowagieTextPdfPdfTemplate:(ComAowagieTextPdfPdfTemplate *)template_ {
  self->template__ = template_;
  self->image_ = nil;
}


#line 222
- (jint)getScaleIcon {
  return self->scaleIcon_;
}


#line 233
- (void)setScaleIconWithInt:(jint)scaleIcon {
  if (scaleIcon < ComAowagieTextPdfPushbuttonField_SCALE_ICON_ALWAYS || scaleIcon > ComAowagieTextPdfPushbuttonField_SCALE_ICON_IS_TOO_SMALL) {
    scaleIcon = ComAowagieTextPdfPushbuttonField_SCALE_ICON_ALWAYS;
  }
  self->scaleIcon_ = scaleIcon;
}


#line 244
- (jboolean)isProportionalIcon {
  return self->proportionalIcon_;
}


#line 253
- (void)setProportionalIconWithBoolean:(jboolean)proportionalIcon {
  self->proportionalIcon_ = proportionalIcon;
}


#line 261
- (jfloat)getIconVerticalAdjustment {
  return self->iconVerticalAdjustment_;
}


#line 271
- (void)setIconVerticalAdjustmentWithFloat:(jfloat)iconVerticalAdjustment {
  if (iconVerticalAdjustment < 0) {
    iconVerticalAdjustment = 0;
  }
  else
#line 274
  if (iconVerticalAdjustment > 1) {
    iconVerticalAdjustment = 1;
  }
  self->iconVerticalAdjustment_ = iconVerticalAdjustment;
}


#line 284
- (jfloat)getIconHorizontalAdjustment {
  return self->iconHorizontalAdjustment_;
}


#line 294
- (void)setIconHorizontalAdjustmentWithFloat:(jfloat)iconHorizontalAdjustment {
  if (iconHorizontalAdjustment < 0) {
    iconHorizontalAdjustment = 0;
  }
  else
#line 297
  if (iconHorizontalAdjustment > 1) {
    iconHorizontalAdjustment = 1;
  }
  self->iconHorizontalAdjustment_ = iconHorizontalAdjustment;
}


#line 303
- (jfloat)calculateFontSizeWithFloat:(jfloat)w
                           withFloat:(jfloat)h {
  return ComAowagieTextPdfPushbuttonField_calculateFontSizeWithFloat_withFloat_(self, w, h);
}


#line 328
- (ComAowagieTextPdfPdfAppearance *)getAppearance {
  ComAowagieTextPdfPdfAppearance *app = [self getBorderAppearance];
  ComAowagieTextRectangle *box = new_ComAowagieTextRectangle_initWithComAowagieTextRectangle_([((ComAowagieTextPdfPdfAppearance *) nil_chk(app)) getBoundingBox]);
  if ((self->text_ == nil || [self->text_ java_length] == 0) && (self->layout_ == ComAowagieTextPdfPushbuttonField_LAYOUT_LABEL_ONLY || (self->image_ == nil && self->template__ == nil && self->iconReference_ == nil))) {
    return app;
  }
  if (self->layout_ == ComAowagieTextPdfPushbuttonField_LAYOUT_ICON_ONLY && self->image_ == nil && self->template__ == nil && self->iconReference_ == nil) {
    return app;
  }
  ComAowagieTextPdfBaseFont *ufont = [self getRealFont];
  jboolean borderExtra = self->borderStyle_ == ComAowagieTextPdfPdfBorderDictionary_STYLE_BEVELED || self->borderStyle_ == ComAowagieTextPdfPdfBorderDictionary_STYLE_INSET;
  jfloat h = [box getHeight] - self->borderWidth_ * 2;
  jfloat bw2 = self->borderWidth_;
  if (borderExtra) {
    JreMinusAssignFloatF(&h, self->borderWidth_ * 2);
    JreTimesAssignFloatF(&bw2, 2);
  }
  jfloat offsetX = borderExtra ? 2 * self->borderWidth_ : self->borderWidth_;
  offsetX = JavaLangMath_maxWithFloat_withFloat_(offsetX, 1);
  jfloat offX = JavaLangMath_minWithFloat_withFloat_(bw2, offsetX);
  self->tp_ = nil;
  jfloat textX = JavaLangFloat_NaN;
  jfloat textY = 0;
  jfloat fsize = self->fontSize_;
  jfloat wt = [box getWidth] - 2 * offX - 2;
  jfloat ht = [box getHeight] - 2 * offX;
  jfloat adj = self->iconFitToBounds_ ? 0 : offX + 1;
  jint nlayout = self->layout_;
  if (self->image_ == nil && self->template__ == nil && self->iconReference_ == nil) {
    nlayout = ComAowagieTextPdfPushbuttonField_LAYOUT_LABEL_ONLY;
  }
  ComAowagieTextRectangle *iconBox = nil;
  while (true) {
    {
      
#line 379
      jfloat nht;
      
#line 412
      jfloat nw;
      
#line 361
      switch (nlayout) {
        case ComAowagieTextPdfPushbuttonField_LAYOUT_LABEL_ONLY:
        case ComAowagieTextPdfPushbuttonField_LAYOUT_LABEL_OVER_ICON:
        if (self->text_ != nil && [self->text_ java_length] > 0 && wt > 0 && ht > 0) {
          fsize = ComAowagieTextPdfPushbuttonField_calculateFontSizeWithFloat_withFloat_(self, wt, ht);
          textX = ([box getWidth] - [((ComAowagieTextPdfBaseFont *) nil_chk(ufont)) getWidthPointWithNSString:self->text_ withFloat:fsize]) / 2;
          textY = ([box getHeight] - [ufont getFontDescriptorWithInt:ComAowagieTextPdfBaseFont_ASCENT withFloat:fsize]) / 2;
        }
        case ComAowagieTextPdfPushbuttonField_LAYOUT_ICON_ONLY:
        if (nlayout == ComAowagieTextPdfPushbuttonField_LAYOUT_LABEL_OVER_ICON || nlayout == ComAowagieTextPdfPushbuttonField_LAYOUT_ICON_ONLY) {
          iconBox = new_ComAowagieTextRectangle_initWithFloat_withFloat_withFloat_withFloat_([box getLeft] + adj, [box getBottom] + adj, [box getRight] - adj, [box getTop] - adj);
        }
        break;
        case ComAowagieTextPdfPushbuttonField_LAYOUT_ICON_TOP_LABEL_BOTTOM:
        if (self->text_ == nil || [self->text_ java_length] == 0 || wt <= 0 || ht <= 0) {
          nlayout = ComAowagieTextPdfPushbuttonField_LAYOUT_ICON_ONLY;
          continue;
        }
        nht = [box getHeight] * 0.35f - offX;
        if (nht > 0) {
          fsize = ComAowagieTextPdfPushbuttonField_calculateFontSizeWithFloat_withFloat_(self, wt, nht);
        }
        else {
          
#line 383
          fsize = 4;
        }
        textX = ([box getWidth] - [((ComAowagieTextPdfBaseFont *) nil_chk(ufont)) getWidthPointWithNSString:self->text_ withFloat:fsize]) / 2;
        textY = offX - [ufont getFontDescriptorWithInt:ComAowagieTextPdfBaseFont_DESCENT withFloat:fsize];
        iconBox = new_ComAowagieTextRectangle_initWithFloat_withFloat_withFloat_withFloat_([box getLeft] + adj, textY + fsize, [box getRight] - adj, [box getTop] - adj);
        break;
        case ComAowagieTextPdfPushbuttonField_LAYOUT_LABEL_TOP_ICON_BOTTOM:
        if (self->text_ == nil || [self->text_ java_length] == 0 || wt <= 0 || ht <= 0) {
          nlayout = ComAowagieTextPdfPushbuttonField_LAYOUT_ICON_ONLY;
          continue;
        }
        nht = [box getHeight] * 0.35f - offX;
        if (nht > 0) {
          fsize = ComAowagieTextPdfPushbuttonField_calculateFontSizeWithFloat_withFloat_(self, wt, nht);
        }
        else {
          
#line 398
          fsize = 4;
        }
        textX = ([box getWidth] - [((ComAowagieTextPdfBaseFont *) nil_chk(ufont)) getWidthPointWithNSString:self->text_ withFloat:fsize]) / 2;
        textY = [box getHeight] - offX - fsize;
        if (textY < offX) {
          textY = offX;
        }
        iconBox = new_ComAowagieTextRectangle_initWithFloat_withFloat_withFloat_withFloat_([box getLeft] + adj, [box getBottom] + adj, [box getRight] - adj, textY + [ufont getFontDescriptorWithInt:ComAowagieTextPdfBaseFont_DESCENT withFloat:fsize]);
        break;
        case ComAowagieTextPdfPushbuttonField_LAYOUT_LABEL_LEFT_ICON_RIGHT:
        if (self->text_ == nil || [self->text_ java_length] == 0 || wt <= 0 || ht <= 0) {
          nlayout = ComAowagieTextPdfPushbuttonField_LAYOUT_ICON_ONLY;
          continue;
        }
        nw = [box getWidth] * 0.35f - offX;
        if (nw > 0) {
          fsize = ComAowagieTextPdfPushbuttonField_calculateFontSizeWithFloat_withFloat_(self, wt, nw);
        }
        else {
          
#line 416
          fsize = 4;
        }
        if ([((ComAowagieTextPdfBaseFont *) nil_chk(ufont)) getWidthPointWithNSString:self->text_ withFloat:fsize] >= wt) {
          nlayout = ComAowagieTextPdfPushbuttonField_LAYOUT_LABEL_ONLY;
          fsize = self->fontSize_;
          continue;
        }
        textX = offX + 1;
        textY = ([box getHeight] - [ufont getFontDescriptorWithInt:ComAowagieTextPdfBaseFont_ASCENT withFloat:fsize]) / 2;
        iconBox = new_ComAowagieTextRectangle_initWithFloat_withFloat_withFloat_withFloat_(textX + [ufont getWidthPointWithNSString:self->text_ withFloat:fsize], [box getBottom] + adj, [box getRight] - adj, [box getTop] - adj);
        break;
        case ComAowagieTextPdfPushbuttonField_LAYOUT_ICON_LEFT_LABEL_RIGHT:
        if (self->text_ == nil || [self->text_ java_length] == 0 || wt <= 0 || ht <= 0) {
          nlayout = ComAowagieTextPdfPushbuttonField_LAYOUT_ICON_ONLY;
          continue;
        }
        nw = [box getWidth] * 0.35f - offX;
        if (nw > 0) {
          fsize = ComAowagieTextPdfPushbuttonField_calculateFontSizeWithFloat_withFloat_(self, wt, nw);
        }
        else {
          
#line 436
          fsize = 4;
        }
        if ([((ComAowagieTextPdfBaseFont *) nil_chk(ufont)) getWidthPointWithNSString:self->text_ withFloat:fsize] >= wt) {
          nlayout = ComAowagieTextPdfPushbuttonField_LAYOUT_LABEL_ONLY;
          fsize = self->fontSize_;
          continue;
        }
        textX = [box getWidth] - [ufont getWidthPointWithNSString:self->text_ withFloat:fsize] - offX - 1;
        textY = ([box getHeight] - [ufont getFontDescriptorWithInt:ComAowagieTextPdfBaseFont_ASCENT withFloat:fsize]) / 2;
        iconBox = new_ComAowagieTextRectangle_initWithFloat_withFloat_withFloat_withFloat_([box getLeft] + adj, [box getBottom] + adj, textX - 1, [box getTop] - adj);
        break;
      }
    }
    
#line 448
    break;
  }
  if (textY < [box getBottom] + offX) {
    textY = [box getBottom] + offX;
  }
  if (iconBox != nil && ([iconBox getWidth] <= 0 || [iconBox getHeight] <= 0)) {
    iconBox = nil;
  }
  jboolean haveIcon = false;
  jfloat boundingBoxWidth = 0;
  jfloat boundingBoxHeight = 0;
  ComAowagieTextPdfPdfArray *matrix = nil;
  if (iconBox != nil) {
    if (self->image_ != nil) {
      self->tp_ = new_ComAowagieTextPdfPdfTemplate_initWithComAowagieTextPdfPdfWriter_(self->writer_);
      [self->tp_ setBoundingBoxWithComAowagieTextRectangle:new_ComAowagieTextRectangle_initWithComAowagieTextRectangle_(self->image_)];
      (void) [((ComAowagieTextPdfPdfWriter *) nil_chk(self->writer_)) addDirectTemplateSimpleWithComAowagieTextPdfPdfTemplate:self->tp_ withComAowagieTextPdfPdfName:JreLoadStatic(ComAowagieTextPdfPdfName, FRM)];
      [((ComAowagieTextPdfPdfTemplate *) nil_chk(self->tp_)) addImageWithComAowagieTextImage:self->image_ withFloat:[((ComAowagieTextImage *) nil_chk(self->image_)) getWidth] withFloat:0 withFloat:0 withFloat:[((ComAowagieTextImage *) nil_chk(self->image_)) getHeight] withFloat:0 withFloat:0];
      haveIcon = true;
      boundingBoxWidth = [((ComAowagieTextRectangle *) nil_chk([((ComAowagieTextPdfPdfTemplate *) nil_chk(self->tp_)) getBoundingBox])) getWidth];
      boundingBoxHeight = [((ComAowagieTextRectangle *) nil_chk([((ComAowagieTextPdfPdfTemplate *) nil_chk(self->tp_)) getBoundingBox])) getHeight];
    }
    else if (self->template__ != nil) {
      self->tp_ = new_ComAowagieTextPdfPdfTemplate_initWithComAowagieTextPdfPdfWriter_(self->writer_);
      [self->tp_ setBoundingBoxWithComAowagieTextRectangle:new_ComAowagieTextRectangle_initWithFloat_withFloat_([((ComAowagieTextPdfPdfTemplate *) nil_chk(self->template__)) getWidth], [((ComAowagieTextPdfPdfTemplate *) nil_chk(self->template__)) getHeight])];
      (void) [((ComAowagieTextPdfPdfWriter *) nil_chk(self->writer_)) addDirectTemplateSimpleWithComAowagieTextPdfPdfTemplate:self->tp_ withComAowagieTextPdfPdfName:JreLoadStatic(ComAowagieTextPdfPdfName, FRM)];
      [((ComAowagieTextPdfPdfTemplate *) nil_chk(self->tp_)) addTemplateWithComAowagieTextPdfPdfTemplate:self->template__ withFloat:[((ComAowagieTextRectangle *) nil_chk([((ComAowagieTextPdfPdfTemplate *) nil_chk(self->template__)) getBoundingBox])) getLeft] withFloat:[((ComAowagieTextRectangle *) nil_chk([((ComAowagieTextPdfPdfTemplate *) nil_chk(self->template__)) getBoundingBox])) getBottom]];
      haveIcon = true;
      boundingBoxWidth = [((ComAowagieTextRectangle *) nil_chk([((ComAowagieTextPdfPdfTemplate *) nil_chk(self->tp_)) getBoundingBox])) getWidth];
      boundingBoxHeight = [((ComAowagieTextRectangle *) nil_chk([((ComAowagieTextPdfPdfTemplate *) nil_chk(self->tp_)) getBoundingBox])) getHeight];
    }
    else if (self->iconReference_ != nil) {
      ComAowagieTextPdfPdfDictionary *dic = (ComAowagieTextPdfPdfDictionary *) cast_chk(ComAowagieTextPdfPdfReader_getPdfObjectWithComAowagieTextPdfPdfObject_(self->iconReference_), [ComAowagieTextPdfPdfDictionary class]);
      if (dic != nil) {
        ComAowagieTextRectangle *r2 = ComAowagieTextPdfPdfReader_getNormalizedRectangleWithComAowagieTextPdfPdfArray_([dic getAsArrayWithComAowagieTextPdfPdfName:JreLoadStatic(ComAowagieTextPdfPdfName, BBOX)]);
        matrix = [dic getAsArrayWithComAowagieTextPdfPdfName:JreLoadStatic(ComAowagieTextPdfPdfName, MATRIX)];
        haveIcon = true;
        boundingBoxWidth = [((ComAowagieTextRectangle *) nil_chk(r2)) getWidth];
        boundingBoxHeight = [r2 getHeight];
      }
    }
  }
  if (haveIcon) {
    jfloat icx = [((ComAowagieTextRectangle *) nil_chk(iconBox)) getWidth] / boundingBoxWidth;
    jfloat icy = [iconBox getHeight] / boundingBoxHeight;
    if (self->proportionalIcon_) {
      switch (self->scaleIcon_) {
        case ComAowagieTextPdfPushbuttonField_SCALE_ICON_IS_TOO_BIG:
        icx = JavaLangMath_minWithFloat_withFloat_(icx, icy);
        icx = JavaLangMath_minWithFloat_withFloat_(icx, 1);
        break;
        case ComAowagieTextPdfPushbuttonField_SCALE_ICON_IS_TOO_SMALL:
        icx = JavaLangMath_minWithFloat_withFloat_(icx, icy);
        icx = JavaLangMath_maxWithFloat_withFloat_(icx, 1);
        break;
        case ComAowagieTextPdfPushbuttonField_SCALE_ICON_NEVER:
        icx = 1;
        break;
        default:
        icx = JavaLangMath_minWithFloat_withFloat_(icx, icy);
        break;
      }
      icy = icx;
    }
    else {
      switch (self->scaleIcon_) {
        case ComAowagieTextPdfPushbuttonField_SCALE_ICON_IS_TOO_BIG:
        icx = JavaLangMath_minWithFloat_withFloat_(icx, 1);
        icy = JavaLangMath_minWithFloat_withFloat_(icy, 1);
        break;
        case ComAowagieTextPdfPushbuttonField_SCALE_ICON_IS_TOO_SMALL:
        icx = JavaLangMath_maxWithFloat_withFloat_(icx, 1);
        icy = JavaLangMath_maxWithFloat_withFloat_(icy, 1);
        break;
        case ComAowagieTextPdfPushbuttonField_SCALE_ICON_NEVER:
        icx = icy = 1;
        break;
        default:
        break;
      }
    }
    jfloat xpos = [iconBox getLeft] + ([iconBox getWidth] - boundingBoxWidth * icx) * self->iconHorizontalAdjustment_;
    jfloat ypos = [iconBox getBottom] + ([iconBox getHeight] - boundingBoxHeight * icy) * self->iconVerticalAdjustment_;
    [app saveState];
    [app rectangleWithFloat:[iconBox getLeft] withFloat:[iconBox getBottom] withFloat:[iconBox getWidth] withFloat:[iconBox getHeight]];
    [app clip];
    [app newPath];
    if (self->tp_ != nil) {
      [app addTemplateWithComAowagieTextPdfPdfTemplate:self->tp_ withFloat:icx withFloat:0 withFloat:0 withFloat:icy withFloat:xpos withFloat:ypos];
    }
    else {
      
#line 538
      jfloat cox = 0;
      jfloat coy = 0;
      if (matrix != nil && [matrix size] == 6) {
        ComAowagieTextPdfPdfNumber *nm = [matrix getAsNumberWithInt:4];
        if (nm != nil) {
          cox = [nm floatValue];
        }
        nm = [matrix getAsNumberWithInt:5];
        if (nm != nil) {
          coy = [nm floatValue];
        }
      }
      [app addTemplateReferenceWithComAowagieTextPdfPdfIndirectReference:self->iconReference_ withComAowagieTextPdfPdfName:JreLoadStatic(ComAowagieTextPdfPdfName, FRM) withFloat:icx withFloat:0 withFloat:0 withFloat:icy withFloat:xpos - cox * icx withFloat:ypos - coy * icy];
    }
    [app restoreState];
  }
  if (!JavaLangFloat_isNaNWithFloat_(textX)) {
    [app saveState];
    [app rectangleWithFloat:offX withFloat:offX withFloat:[box getWidth] - 2 * offX withFloat:[box getHeight] - 2 * offX];
    [app clip];
    [app newPath];
    if (self->textColor_ == nil) {
      [app resetGrayFill];
    }
    else {
      
#line 562
      [app setColorFillWithHarmonyJavaAwtColor:self->textColor_];
    }
    [app beginText];
    [app setFontAndSizeWithComAowagieTextPdfBaseFont:ufont withFloat:fsize];
    [app setTextMatrixWithFloat:textX withFloat:textY];
    [app showTextWithNSString:self->text_];
    [app endText];
    [app restoreState];
  }
  return app;
}


#line 580
- (ComAowagieTextPdfPdfFormField *)getField {
  ComAowagieTextPdfPdfFormField *field = ComAowagieTextPdfPdfFormField_createPushButtonWithComAowagieTextPdfPdfWriter_(self->writer_);
  [((ComAowagieTextPdfPdfFormField *) nil_chk(field)) setWidgetWithComAowagieTextRectangle:self->box_ withComAowagieTextPdfPdfName:JreLoadStatic(ComAowagieTextPdfPdfAnnotation, HIGHLIGHT_INVERT)];
  if (self->fieldName_ != nil) {
    [field setFieldNameWithNSString:self->fieldName_];
    if ((self->options_ & ComAowagieTextPdfBaseField_READ_ONLY) != 0) {
      [field setFieldFlagsWithInt:ComAowagieTextPdfPdfFormField_FF_READ_ONLY];
    }
    if ((self->options_ & ComAowagieTextPdfBaseField_REQUIRED) != 0) {
      [field setFieldFlagsWithInt:ComAowagieTextPdfPdfFormField_FF_REQUIRED];
    }
  }
  if (self->text_ != nil) {
    [field setMKNormalCaptionWithNSString:self->text_];
  }
  if (self->rotation_ != 0) {
    [field setMKRotationWithInt:self->rotation_];
  }
  [field setBorderStyleWithComAowagieTextPdfPdfBorderDictionary:new_ComAowagieTextPdfPdfBorderDictionary_initPackagePrivateWithFloat_withInt_withComAowagieTextPdfPdfDashPattern_(self->borderWidth_, self->borderStyle_, new_ComAowagieTextPdfPdfDashPattern_initPackagePrivateWithFloat_(3))];
  ComAowagieTextPdfPdfAppearance *tpa = [self getAppearance];
  [field setAppearanceWithComAowagieTextPdfPdfName:JreLoadStatic(ComAowagieTextPdfPdfAnnotation, APPEARANCE_NORMAL) withComAowagieTextPdfPdfTemplate:tpa];
  ComAowagieTextPdfPdfAppearance *da = (ComAowagieTextPdfPdfAppearance *) cast_chk([((ComAowagieTextPdfPdfAppearance *) nil_chk(tpa)) getDuplicate], [ComAowagieTextPdfPdfAppearance class]);
  [((ComAowagieTextPdfPdfAppearance *) nil_chk(da)) setFontAndSizeWithComAowagieTextPdfBaseFont:[self getRealFont] withFloat:self->fontSize_];
  if (self->textColor_ == nil) {
    [da setGrayFillWithFloat:0];
  }
  else {
    
#line 606
    [da setColorFillWithHarmonyJavaAwtColor:self->textColor_];
  }
  [field setDefaultAppearanceStringWithComAowagieTextPdfPdfContentByte:da];
  if (self->borderColor_ != nil) {
    [field setMKBorderColorWithHarmonyJavaAwtColor:self->borderColor_];
  }
  if (self->backgroundColor_ != nil) {
    [field setMKBackgroundColorWithHarmonyJavaAwtColor:self->backgroundColor_];
  }
  switch (self->visibility_) {
    case ComAowagieTextPdfBaseField_HIDDEN:
    [field setFlagsWithInt:ComAowagieTextPdfPdfAnnotation_FLAGS_PRINT | ComAowagieTextPdfPdfAnnotation_FLAGS_HIDDEN];
    break;
    case ComAowagieTextPdfBaseField_VISIBLE_BUT_DOES_NOT_PRINT:
    break;
    case ComAowagieTextPdfBaseField_HIDDEN_BUT_PRINTABLE:
    [field setFlagsWithInt:ComAowagieTextPdfPdfAnnotation_FLAGS_PRINT | ComAowagieTextPdfPdfAnnotation_FLAGS_NOVIEW];
    break;
    default:
    [field setFlagsWithInt:ComAowagieTextPdfPdfAnnotation_FLAGS_PRINT];
    break;
  }
  if (self->tp_ != nil) {
    [field setMKNormalIconWithComAowagieTextPdfPdfTemplate:self->tp_];
  }
  [field setMKTextPositionWithInt:self->layout_ - 1];
  ComAowagieTextPdfPdfName *scale_ = JreLoadStatic(ComAowagieTextPdfPdfName, A);
  if (self->scaleIcon_ == ComAowagieTextPdfPushbuttonField_SCALE_ICON_IS_TOO_BIG) {
    scale_ = JreLoadStatic(ComAowagieTextPdfPdfName, B);
  }
  else
#line 635
  if (self->scaleIcon_ == ComAowagieTextPdfPushbuttonField_SCALE_ICON_IS_TOO_SMALL) {
    scale_ = JreLoadStatic(ComAowagieTextPdfPdfName, S);
  }
  else
#line 637
  if (self->scaleIcon_ == ComAowagieTextPdfPushbuttonField_SCALE_ICON_NEVER) {
    scale_ = JreLoadStatic(ComAowagieTextPdfPdfName, N);
  }
  [field setMKIconFitWithComAowagieTextPdfPdfName:scale_ withComAowagieTextPdfPdfName:self->proportionalIcon_ ? JreLoadStatic(ComAowagieTextPdfPdfName, P) : JreLoadStatic(ComAowagieTextPdfPdfName, A) withFloat:self->iconHorizontalAdjustment_ withFloat:
#line 641
  self->iconVerticalAdjustment_ withBoolean:self->iconFitToBounds_];
  return field;
}


#line 649
- (jboolean)isIconFitToBounds {
  return self->iconFitToBounds_;
}


#line 660
- (void)setIconFitToBoundsWithBoolean:(jboolean)iconFitToBounds {
  self->iconFitToBounds_ = iconFitToBounds;
}


#line 673
- (ComAowagieTextPdfPRIndirectReference *)getIconReference {
  return self->iconReference_;
}


#line 681
- (void)setIconReferenceWithComAowagieTextPdfPRIndirectReference:(ComAowagieTextPdfPRIndirectReference *)iconReference {
  self->iconReference_ = iconReference;
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, 0, -1, -1, -1, -1 },
    { NULL, "I", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 1, 2, -1, -1, -1, -1 },
    { NULL, "LComAowagieTextImage;", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 3, 4, -1, -1, -1, -1 },
    { NULL, "LComAowagieTextPdfPdfTemplate;", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 5, 6, -1, -1, -1, -1 },
    { NULL, "I", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 7, 2, -1, -1, -1, -1 },
    { NULL, "Z", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 8, 9, -1, -1, -1, -1 },
    { NULL, "F", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 10, 11, -1, -1, -1, -1 },
    { NULL, "F", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 12, 11, -1, -1, -1, -1 },
    { NULL, "F", 0x2, 13, 14, 15, -1, -1, -1 },
    { NULL, "LComAowagieTextPdfPdfAppearance;", 0x1, -1, -1, 15, -1, -1, -1 },
    { NULL, "LComAowagieTextPdfPdfFormField;", 0x1, -1, -1, 15, -1, -1, -1 },
    { NULL, "Z", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 16, 9, -1, -1, -1, -1 },
    { NULL, "LComAowagieTextPdfPRIndirectReference;", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 17, 18, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initPackagePrivateWithComAowagieTextPdfPdfWriter:withComAowagieTextRectangle:withNSString:);
  methods[1].selector = @selector(getLayout);
  methods[2].selector = @selector(setLayoutWithInt:);
  methods[3].selector = @selector(getImage);
  methods[4].selector = @selector(setImageWithComAowagieTextImage:);
  methods[5].selector = @selector(getTemplate);
  methods[6].selector = @selector(setTemplateWithComAowagieTextPdfPdfTemplate:);
  methods[7].selector = @selector(getScaleIcon);
  methods[8].selector = @selector(setScaleIconWithInt:);
  methods[9].selector = @selector(isProportionalIcon);
  methods[10].selector = @selector(setProportionalIconWithBoolean:);
  methods[11].selector = @selector(getIconVerticalAdjustment);
  methods[12].selector = @selector(setIconVerticalAdjustmentWithFloat:);
  methods[13].selector = @selector(getIconHorizontalAdjustment);
  methods[14].selector = @selector(setIconHorizontalAdjustmentWithFloat:);
  methods[15].selector = @selector(calculateFontSizeWithFloat:withFloat:);
  methods[16].selector = @selector(getAppearance);
  methods[17].selector = @selector(getField);
  methods[18].selector = @selector(isIconFitToBounds);
  methods[19].selector = @selector(setIconFitToBoundsWithBoolean:);
  methods[20].selector = @selector(getIconReference);
  methods[21].selector = @selector(setIconReferenceWithComAowagieTextPdfPRIndirectReference:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "LAYOUT_LABEL_ONLY", "I", .constantValue.asInt = ComAowagieTextPdfPushbuttonField_LAYOUT_LABEL_ONLY, 0x1a, -1, -1, -1, -1 },
    { "LAYOUT_ICON_ONLY", "I", .constantValue.asInt = ComAowagieTextPdfPushbuttonField_LAYOUT_ICON_ONLY, 0x1a, -1, -1, -1, -1 },
    { "LAYOUT_ICON_TOP_LABEL_BOTTOM", "I", .constantValue.asInt = ComAowagieTextPdfPushbuttonField_LAYOUT_ICON_TOP_LABEL_BOTTOM, 0x1a, -1, -1, -1, -1 },
    { "LAYOUT_LABEL_TOP_ICON_BOTTOM", "I", .constantValue.asInt = ComAowagieTextPdfPushbuttonField_LAYOUT_LABEL_TOP_ICON_BOTTOM, 0x1a, -1, -1, -1, -1 },
    { "LAYOUT_ICON_LEFT_LABEL_RIGHT", "I", .constantValue.asInt = ComAowagieTextPdfPushbuttonField_LAYOUT_ICON_LEFT_LABEL_RIGHT, 0x1a, -1, -1, -1, -1 },
    { "LAYOUT_LABEL_LEFT_ICON_RIGHT", "I", .constantValue.asInt = ComAowagieTextPdfPushbuttonField_LAYOUT_LABEL_LEFT_ICON_RIGHT, 0x1a, -1, -1, -1, -1 },
    { "LAYOUT_LABEL_OVER_ICON", "I", .constantValue.asInt = ComAowagieTextPdfPushbuttonField_LAYOUT_LABEL_OVER_ICON, 0x1a, -1, -1, -1, -1 },
    { "SCALE_ICON_ALWAYS", "I", .constantValue.asInt = ComAowagieTextPdfPushbuttonField_SCALE_ICON_ALWAYS, 0x18, -1, -1, -1, -1 },
    { "SCALE_ICON_NEVER", "I", .constantValue.asInt = ComAowagieTextPdfPushbuttonField_SCALE_ICON_NEVER, 0x18, -1, -1, -1, -1 },
    { "SCALE_ICON_IS_TOO_BIG", "I", .constantValue.asInt = ComAowagieTextPdfPushbuttonField_SCALE_ICON_IS_TOO_BIG, 0x18, -1, -1, -1, -1 },
    { "SCALE_ICON_IS_TOO_SMALL", "I", .constantValue.asInt = ComAowagieTextPdfPushbuttonField_SCALE_ICON_IS_TOO_SMALL, 0x18, -1, -1, -1, -1 },
    { "layout_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "image_", "LComAowagieTextImage;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "template__", "LComAowagieTextPdfPdfTemplate;", .constantValue.asLong = 0, 0x2, 19, -1, -1, -1 },
    { "scaleIcon_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "proportionalIcon_", "Z", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "iconVerticalAdjustment_", "F", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "iconHorizontalAdjustment_", "F", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "iconFitToBounds_", "Z", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "tp_", "LComAowagieTextPdfPdfTemplate;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "iconReference_", "LComAowagieTextPdfPRIndirectReference;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LComAowagieTextPdfPdfWriter;LComAowagieTextRectangle;LNSString;", "setLayout", "I", "setImage", "LComAowagieTextImage;", "setTemplate", "LComAowagieTextPdfPdfTemplate;", "setScaleIcon", "setProportionalIcon", "Z", "setIconVerticalAdjustment", "F", "setIconHorizontalAdjustment", "calculateFontSize", "FF", "LJavaIoIOException;LComAowagieTextDocumentException;", "setIconFitToBounds", "setIconReference", "LComAowagieTextPdfPRIndirectReference;", "template" };
  static const J2ObjcClassInfo _ComAowagieTextPdfPushbuttonField = { "PushbuttonField", "com.aowagie.text.pdf", ptrTable, methods, fields, 7, 0x0, 22, 21, -1, -1, -1, -1, -1 };
  return &_ComAowagieTextPdfPushbuttonField;
}

@end


#line 157
void ComAowagieTextPdfPushbuttonField_initPackagePrivateWithComAowagieTextPdfPdfWriter_withComAowagieTextRectangle_withNSString_(ComAowagieTextPdfPushbuttonField *self, ComAowagieTextPdfPdfWriter *writer, ComAowagieTextRectangle *box, NSString *fieldName) {
  ComAowagieTextPdfBaseField_initPackagePrivateWithComAowagieTextPdfPdfWriter_withComAowagieTextRectangle_withNSString_(self, writer, box, fieldName);
  self->layout_ = ComAowagieTextPdfPushbuttonField_LAYOUT_LABEL_ONLY;
  self->scaleIcon_ = ComAowagieTextPdfPushbuttonField_SCALE_ICON_ALWAYS;
  self->proportionalIcon_ =
#line 131
  true;
  self->iconVerticalAdjustment_ =
#line 136
  0.5f;
  self->iconHorizontalAdjustment_ =
#line 141
  0.5f;
}


#line 157
ComAowagieTextPdfPushbuttonField *new_ComAowagieTextPdfPushbuttonField_initPackagePrivateWithComAowagieTextPdfPdfWriter_withComAowagieTextRectangle_withNSString_(ComAowagieTextPdfPdfWriter *writer, ComAowagieTextRectangle *box, NSString *fieldName) {
  J2OBJC_NEW_IMPL(ComAowagieTextPdfPushbuttonField, initPackagePrivateWithComAowagieTextPdfPdfWriter_withComAowagieTextRectangle_withNSString_, writer, box, fieldName)
}


#line 157
ComAowagieTextPdfPushbuttonField *create_ComAowagieTextPdfPushbuttonField_initPackagePrivateWithComAowagieTextPdfPdfWriter_withComAowagieTextRectangle_withNSString_(ComAowagieTextPdfPdfWriter *writer, ComAowagieTextRectangle *box, NSString *fieldName) {
  J2OBJC_CREATE_IMPL(ComAowagieTextPdfPushbuttonField, initPackagePrivateWithComAowagieTextPdfPdfWriter_withComAowagieTextRectangle_withNSString_, writer, box, fieldName)
}


#line 303
jfloat ComAowagieTextPdfPushbuttonField_calculateFontSizeWithFloat_withFloat_(ComAowagieTextPdfPushbuttonField *self, jfloat w, jfloat h) {
  ComAowagieTextPdfBaseFont *ufont = [self getRealFont];
  jfloat fsize = self->fontSize_;
  if (fsize == 0) {
    jfloat bw = [((ComAowagieTextPdfBaseFont *) nil_chk(ufont)) getWidthPointWithNSString:self->text_ withFloat:1];
    if (bw == 0) {
      fsize = 12;
    }
    else {
      
#line 311
      fsize = w / bw;
    }
    jfloat nfsize = h / (1 - [ufont getFontDescriptorWithInt:ComAowagieTextPdfBaseFont_DESCENT withFloat:1]);
    fsize = JavaLangMath_minWithFloat_withFloat_(fsize, nfsize);
    if (fsize < 4) {
      fsize = 4;
    }
  }
  return fsize;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComAowagieTextPdfPushbuttonField)
