//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/desarrolloabamobile/Documents/JAVA/pades-ios/src/main/java/com/aowagie/text/pdf/parser/SimpleTextExtractingPdfContentStreamProcessor.java
//

#include "J2ObjC_source.h"
#include "com/aowagie/text/pdf/CMapAwareDocumentFont.h"
#include "com/aowagie/text/pdf/parser/GraphicsState.h"
#include "com/aowagie/text/pdf/parser/Matrix.h"
#include "com/aowagie/text/pdf/parser/PdfContentStreamProcessor.h"
#include "com/aowagie/text/pdf/parser/SimpleTextExtractingPdfContentStreamProcessor.h"
#include "java/lang/StringBuffer.h"

#if !__has_feature(objc_arc)
#error "com/aowagie/text/pdf/parser/SimpleTextExtractingPdfContentStreamProcessor must be compiled with ARC (-fobjc-arc)"
#endif

@interface ComAowagieTextPdfParserSimpleTextExtractingPdfContentStreamProcessor () {
 @public
  /*!
   @brief keeps track of a text matrix.
   */
  ComAowagieTextPdfParserMatrix *lastTextLineMatrix_;
  /*!
   @brief keeps track of a text matrix.
   */
  ComAowagieTextPdfParserMatrix *lastEndingTextMatrix_;
  /*!
   @brief The StringBuffer used to write the resulting String.
   */
  JavaLangStringBuffer *result_;
}

@end

J2OBJC_FIELD_SETTER(ComAowagieTextPdfParserSimpleTextExtractingPdfContentStreamProcessor, lastTextLineMatrix_, ComAowagieTextPdfParserMatrix *)
J2OBJC_FIELD_SETTER(ComAowagieTextPdfParserSimpleTextExtractingPdfContentStreamProcessor, lastEndingTextMatrix_, ComAowagieTextPdfParserMatrix *)
J2OBJC_FIELD_SETTER(ComAowagieTextPdfParserSimpleTextExtractingPdfContentStreamProcessor, result_, JavaLangStringBuffer *)

#line 1 "/Users/desarrolloabamobile/Documents/JAVA/pades-ios/src/main/java/com/aowagie/text/pdf/parser/SimpleTextExtractingPdfContentStreamProcessor.java"


#line 53
@implementation ComAowagieTextPdfParserSimpleTextExtractingPdfContentStreamProcessor


#line 66
- (instancetype)initPackagePrivate {
  ComAowagieTextPdfParserSimpleTextExtractingPdfContentStreamProcessor_initPackagePrivate(self);
  return self;
}


#line 69
- (void)reset {
  
#line 71
  [super reset];
  self->lastTextLineMatrix_ = nil;
  self->lastEndingTextMatrix_ = nil;
  self->result_ = new_JavaLangStringBuffer_init();
}


#line 81
- (NSString *)getResultantText {
  return [((JavaLangStringBuffer *) nil_chk(self->result_)) description];
}


#line 91
- (void)displayTextWithNSString:(NSString *)text
withComAowagieTextPdfParserMatrix:(ComAowagieTextPdfParserMatrix *)endingTextMatrix {
  jboolean hardReturn = false;
  if (self->lastTextLineMatrix_ != nil && [self->lastTextLineMatrix_ getWithInt:ComAowagieTextPdfParserMatrix_I32] != [((ComAowagieTextPdfParserMatrix *) nil_chk([self getCurrentTextLineMatrix])) getWithInt:ComAowagieTextPdfParserMatrix_I32]) {
    
#line 96
    hardReturn = true;
  }
  
#line 99
  jfloat currentX = [((ComAowagieTextPdfParserMatrix *) nil_chk([self getCurrentTextMatrix])) getWithInt:ComAowagieTextPdfParserMatrix_I31];
  if (hardReturn) {
    
#line 102
    (void) [((JavaLangStringBuffer *) nil_chk(self->result_)) appendWithChar:0x000a];
  }
  else
#line 103
  if (self->lastEndingTextMatrix_ != nil) {
    jfloat lastEndX = [self->lastEndingTextMatrix_ getWithInt:ComAowagieTextPdfParserMatrix_I31];
    
#line 108
    jfloat spaceGlyphWidth = [((ComAowagieTextPdfCMapAwareDocumentFont *) nil_chk(((ComAowagieTextPdfParserGraphicsState *) nil_chk([self gs]))->font_)) getWidthWithInt:' '] / 1000.0f;
    jfloat spaceWidth = (spaceGlyphWidth * ((ComAowagieTextPdfParserGraphicsState *) nil_chk([self gs]))->fontSize_ + ((ComAowagieTextPdfParserGraphicsState *) nil_chk([self gs]))->characterSpacing_ + ((ComAowagieTextPdfParserGraphicsState *) nil_chk([self gs]))->wordSpacing_) * ((ComAowagieTextPdfParserGraphicsState *) nil_chk([self gs]))->horizontalScaling_;
    ComAowagieTextPdfParserMatrix *scaled = [new_ComAowagieTextPdfParserMatrix_initPackagePrivateWithFloat_withFloat_(spaceWidth, 0) multiplyWithComAowagieTextPdfParserMatrix:[self getCurrentTextMatrix]];
    jfloat scaledSpaceWidth = [((ComAowagieTextPdfParserMatrix *) nil_chk(scaled)) getWithInt:ComAowagieTextPdfParserMatrix_I31] - [((ComAowagieTextPdfParserMatrix *) nil_chk([self getCurrentTextMatrix])) getWithInt:ComAowagieTextPdfParserMatrix_I31];
    
#line 113
    if (currentX - lastEndX > scaledSpaceWidth / 2.0f) {
      
#line 115
      (void) [((JavaLangStringBuffer *) nil_chk(self->result_)) appendWithChar:' '];
    }
  }
  else {
  }
  
#line 123
  (void) [((JavaLangStringBuffer *) nil_chk(self->result_)) appendWithNSString:text];
  
#line 125
  self->lastTextLineMatrix_ = [self getCurrentTextLineMatrix];
  self->lastEndingTextMatrix_ = endingTextMatrix;
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 0, 1, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initPackagePrivate);
  methods[1].selector = @selector(reset);
  methods[2].selector = @selector(getResultantText);
  methods[3].selector = @selector(displayTextWithNSString:withComAowagieTextPdfParserMatrix:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "lastTextLineMatrix_", "LComAowagieTextPdfParserMatrix;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "lastEndingTextMatrix_", "LComAowagieTextPdfParserMatrix;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "result_", "LJavaLangStringBuffer;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "displayText", "LNSString;LComAowagieTextPdfParserMatrix;" };
  static const J2ObjcClassInfo _ComAowagieTextPdfParserSimpleTextExtractingPdfContentStreamProcessor = { "SimpleTextExtractingPdfContentStreamProcessor", "com.aowagie.text.pdf.parser", ptrTable, methods, fields, 7, 0x0, 4, 3, -1, -1, -1, -1, -1 };
  return &_ComAowagieTextPdfParserSimpleTextExtractingPdfContentStreamProcessor;
}

@end


#line 66
void ComAowagieTextPdfParserSimpleTextExtractingPdfContentStreamProcessor_initPackagePrivate(ComAowagieTextPdfParserSimpleTextExtractingPdfContentStreamProcessor *self) {
  ComAowagieTextPdfParserPdfContentStreamProcessor_initPackagePrivate(self);
  self->lastTextLineMatrix_ =
#line 56
  nil;
  self->lastEndingTextMatrix_ =
#line 58
  nil;
  self->result_ =
#line 61
  nil;
}


#line 66
ComAowagieTextPdfParserSimpleTextExtractingPdfContentStreamProcessor *new_ComAowagieTextPdfParserSimpleTextExtractingPdfContentStreamProcessor_initPackagePrivate() {
  J2OBJC_NEW_IMPL(ComAowagieTextPdfParserSimpleTextExtractingPdfContentStreamProcessor, initPackagePrivate)
}


#line 66
ComAowagieTextPdfParserSimpleTextExtractingPdfContentStreamProcessor *create_ComAowagieTextPdfParserSimpleTextExtractingPdfContentStreamProcessor_initPackagePrivate() {
  J2OBJC_CREATE_IMPL(ComAowagieTextPdfParserSimpleTextExtractingPdfContentStreamProcessor, initPackagePrivate)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComAowagieTextPdfParserSimpleTextExtractingPdfContentStreamProcessor)
