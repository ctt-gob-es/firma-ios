//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/desarrolloabamobile/Documents/JAVA/pades-ios/src/main/java/org/spongycastle/cms/CMSEnvelopedDataGenerator.java
//

#include "ASN1EncodableVector.h"
#include "ASN1ObjectIdentifier.h"
#include "ASN1OctetString.h"
#include "ASN1Set.h"
#include "AlgorithmIdentifier.h"
#include "AttributeTable.h"
#include "BEROctetString.h"
#include "BERSet.h"
#include "CMSAttributeTableGenerator.h"
#include "CMSEnvelopedData.h"
#include "CMSEnvelopedDataGenerator.h"
#include "CMSEnvelopedGenerator.h"
#include "CMSException.h"
#include "CMSObjectIdentifiers.h"
#include "CMSTypedData.h"
#include "ContentInfo.h"
#include "DERSet.h"
#include "EncryptedContentInfo.h"
#include "EnvelopedData.h"
#include "GenericKey.h"
#include "IOSClass.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "OriginatorInfo.h"
#include "OutputEncryptor.h"
#include "RecipientInfo.h"
#include "RecipientInfoGenerator.h"
#include "java/io/ByteArrayOutputStream.h"
#include "java/io/IOException.h"
#include "java/io/OutputStream.h"
#include "java/lang/IllegalStateException.h"
#include "java/util/HashMap.h"
#include "java/util/Iterator.h"
#include "java/util/List.h"

#if !__has_feature(objc_arc)
#error "CMSEnvelopedDataGenerator must be compiled with ARC (-fobjc-arc)"
#endif

@interface OrgSpongycastleCmsCMSEnvelopedDataGenerator ()

- (OrgSpongycastleCmsCMSEnvelopedData *)doGenerateWithOrgSpongycastleCmsCMSTypedData:(id<OrgSpongycastleCmsCMSTypedData>)content
                                          withOrgSpongycastleOperatorOutputEncryptor:(id<OrgSpongycastleOperatorOutputEncryptor>)contentEncryptor;

@end

__attribute__((unused)) static OrgSpongycastleCmsCMSEnvelopedData *OrgSpongycastleCmsCMSEnvelopedDataGenerator_doGenerateWithOrgSpongycastleCmsCMSTypedData_withOrgSpongycastleOperatorOutputEncryptor_(OrgSpongycastleCmsCMSEnvelopedDataGenerator *self, id<OrgSpongycastleCmsCMSTypedData> content, id<OrgSpongycastleOperatorOutputEncryptor> contentEncryptor);

#line 1 "/Users/desarrolloabamobile/Documents/JAVA/pades-ios/src/main/java/org/spongycastle/cms/CMSEnvelopedDataGenerator.java"


#line 43
@implementation OrgSpongycastleCmsCMSEnvelopedDataGenerator

J2OBJC_IGNORE_DESIGNATED_BEGIN

#line 49
- (instancetype)init {
  OrgSpongycastleCmsCMSEnvelopedDataGenerator_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END


#line 53
- (OrgSpongycastleCmsCMSEnvelopedData *)doGenerateWithOrgSpongycastleCmsCMSTypedData:(id<OrgSpongycastleCmsCMSTypedData>)content
                                          withOrgSpongycastleOperatorOutputEncryptor:(id<OrgSpongycastleOperatorOutputEncryptor>)contentEncryptor {
  return OrgSpongycastleCmsCMSEnvelopedDataGenerator_doGenerateWithOrgSpongycastleCmsCMSTypedData_withOrgSpongycastleOperatorOutputEncryptor_(self, content, contentEncryptor);
}


#line 124
- (OrgSpongycastleCmsCMSEnvelopedData *)generateWithOrgSpongycastleCmsCMSTypedData:(id<OrgSpongycastleCmsCMSTypedData>)content
                                        withOrgSpongycastleOperatorOutputEncryptor:(id<OrgSpongycastleOperatorOutputEncryptor>)contentEncryptor {
  
#line 129
  return OrgSpongycastleCmsCMSEnvelopedDataGenerator_doGenerateWithOrgSpongycastleCmsCMSTypedData_withOrgSpongycastleOperatorOutputEncryptor_(self, content, contentEncryptor);
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LOrgSpongycastleCmsCMSEnvelopedData;", 0x2, 0, 1, 2, -1, -1, -1 },
    { NULL, "LOrgSpongycastleCmsCMSEnvelopedData;", 0x1, 3, 1, 2, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(init);
  methods[1].selector = @selector(doGenerateWithOrgSpongycastleCmsCMSTypedData:withOrgSpongycastleOperatorOutputEncryptor:);
  methods[2].selector = @selector(generateWithOrgSpongycastleCmsCMSTypedData:withOrgSpongycastleOperatorOutputEncryptor:);
  #pragma clang diagnostic pop
  static const void *ptrTable[] = { "doGenerate", "LOrgSpongycastleCmsCMSTypedData;LOrgSpongycastleOperatorOutputEncryptor;", "LOrgSpongycastleCmsCMSException;", "generate" };
  static const J2ObjcClassInfo _OrgSpongycastleCmsCMSEnvelopedDataGenerator = { "CMSEnvelopedDataGenerator", "org.spongycastle.cms", ptrTable, methods, NULL, 7, 0x1, 3, 0, -1, -1, -1, -1, -1 };
  return &_OrgSpongycastleCmsCMSEnvelopedDataGenerator;
}

@end


#line 49
void OrgSpongycastleCmsCMSEnvelopedDataGenerator_init(OrgSpongycastleCmsCMSEnvelopedDataGenerator *self) {
  OrgSpongycastleCmsCMSEnvelopedGenerator_init(self);
}


#line 49
OrgSpongycastleCmsCMSEnvelopedDataGenerator *new_OrgSpongycastleCmsCMSEnvelopedDataGenerator_init() {
  J2OBJC_NEW_IMPL(OrgSpongycastleCmsCMSEnvelopedDataGenerator, init)
}


#line 49
OrgSpongycastleCmsCMSEnvelopedDataGenerator *create_OrgSpongycastleCmsCMSEnvelopedDataGenerator_init() {
  J2OBJC_CREATE_IMPL(OrgSpongycastleCmsCMSEnvelopedDataGenerator, init)
}

OrgSpongycastleCmsCMSEnvelopedData *OrgSpongycastleCmsCMSEnvelopedDataGenerator_doGenerateWithOrgSpongycastleCmsCMSTypedData_withOrgSpongycastleOperatorOutputEncryptor_(OrgSpongycastleCmsCMSEnvelopedDataGenerator *self, id<OrgSpongycastleCmsCMSTypedData> content, id<OrgSpongycastleOperatorOutputEncryptor> contentEncryptor) {
  
#line 58
  if (![((id<JavaUtilList>) nil_chk(self->oldRecipientInfoGenerators_)) isEmpty]) {
    
#line 60
    @throw new_JavaLangIllegalStateException_initWithNSString_(@"can only use addRecipientGenerator() with this method");
  }
  
#line 63
  OrgSpongycastleAsn1ASN1EncodableVector *recipientInfos = new_OrgSpongycastleAsn1ASN1EncodableVector_init();
  OrgSpongycastleAsn1X509AlgorithmIdentifier *encAlgId;
  OrgSpongycastleAsn1ASN1OctetString *encContent;
  
#line 67
  JavaIoByteArrayOutputStream *bOut = new_JavaIoByteArrayOutputStream_init();
  
#line 69
  @try {
    
#line 71
    JavaIoOutputStream *cOut = [((id<OrgSpongycastleOperatorOutputEncryptor>) nil_chk(contentEncryptor)) getOutputStreamWithJavaIoOutputStream:bOut];
    
#line 73
    [((id<OrgSpongycastleCmsCMSTypedData>) nil_chk(content)) writeWithJavaIoOutputStream:cOut];
    
#line 75
    [((JavaIoOutputStream *) nil_chk(cOut)) close];
  }
  @catch (JavaIoIOException *e) {
    
#line 79
    @throw new_OrgSpongycastleCmsCMSException_initWithNSString_(@"");
  }
  
#line 82
  IOSByteArray *encryptedContent = [bOut toByteArray];
  
#line 84
  encAlgId = [contentEncryptor getAlgorithmIdentifier];
  
#line 86
  encContent = new_OrgSpongycastleAsn1BEROctetString_initWithByteArray_(encryptedContent);
  
#line 88
  OrgSpongycastleOperatorGenericKey *encKey = [contentEncryptor getKey];
  
#line 90
  for (id<JavaUtilIterator> it = [((id<JavaUtilList>) nil_chk(self->recipientInfoGenerators_)) iterator]; [((id<JavaUtilIterator>) nil_chk(it)) hasNext]; ) {
    
#line 92
    id<OrgSpongycastleCmsRecipientInfoGenerator> recipient = (id<OrgSpongycastleCmsRecipientInfoGenerator>) cast_check([it next], OrgSpongycastleCmsRecipientInfoGenerator_class_());
    
#line 94
    [recipientInfos addWithOrgSpongycastleAsn1ASN1Encodable:[((id<OrgSpongycastleCmsRecipientInfoGenerator>) nil_chk(recipient)) generateWithOrgSpongycastleOperatorGenericKey:encKey]];
  }
  
#line 97
  OrgSpongycastleAsn1CmsEncryptedContentInfo *eci = new_OrgSpongycastleAsn1CmsEncryptedContentInfo_initWithOrgSpongycastleAsn1ASN1ObjectIdentifier_withOrgSpongycastleAsn1X509AlgorithmIdentifier_withOrgSpongycastleAsn1ASN1OctetString_(
#line 98
  [((id<OrgSpongycastleCmsCMSTypedData>) nil_chk(content)) getContentType],
#line 99
  encAlgId,
#line 100
  encContent);
  
#line 102
  OrgSpongycastleAsn1ASN1Set *unprotectedAttrSet = nil;
  if (self->unprotectedAttributeGenerator_ != nil) {
    
#line 105
    OrgSpongycastleAsn1CmsAttributeTable *attrTable = [self->unprotectedAttributeGenerator_ getAttributesWithJavaUtilMap:new_JavaUtilHashMap_init()];
    
#line 107
    unprotectedAttrSet = new_OrgSpongycastleAsn1BERSet_initWithOrgSpongycastleAsn1ASN1EncodableVector_([((OrgSpongycastleAsn1CmsAttributeTable *) nil_chk(attrTable)) toASN1EncodableVector]);
  }
  
#line 110
  OrgSpongycastleAsn1CmsContentInfo *contentInfo = new_OrgSpongycastleAsn1CmsContentInfo_initWithOrgSpongycastleAsn1ASN1ObjectIdentifier_withOrgSpongycastleAsn1ASN1Encodable_(JreLoadStatic(OrgSpongycastleAsn1CmsCMSObjectIdentifiers, envelopedData), new_OrgSpongycastleAsn1CmsEnvelopedData_initWithOrgSpongycastleAsn1CmsOriginatorInfo_withOrgSpongycastleAsn1ASN1Set_withOrgSpongycastleAsn1CmsEncryptedContentInfo_withOrgSpongycastleAsn1ASN1Set_(self->originatorInfo_, new_OrgSpongycastleAsn1DERSet_initWithOrgSpongycastleAsn1ASN1EncodableVector_(
#line 112
  recipientInfos), eci, unprotectedAttrSet));
  
#line 114
  return new_OrgSpongycastleCmsCMSEnvelopedData_initWithOrgSpongycastleAsn1CmsContentInfo_(contentInfo);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgSpongycastleCmsCMSEnvelopedDataGenerator)
