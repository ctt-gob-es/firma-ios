//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/desarrolloabamobile/Documents/JAVA/pades-ios/src/main/java/org/apache/harmony/awt/gl/color/ColorConverter.java
//

#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "harmony/java/awt/color/ColorSpace.h"
#include "org/apache/harmony/awt/gl/color/ColorConverter.h"
#include "org/apache/harmony/awt/gl/color/ColorScaler.h"
#include "org/apache/harmony/awt/gl/color/ICC_Transform.h"
#include "org/apache/harmony/awt/gl/color/NativeImageFormat.h"

#if !__has_feature(objc_arc)
#error "org/apache/harmony/awt/gl/color/ColorConverter must be compiled with ARC (-fobjc-arc)"
#endif

@interface OrgApacheHarmonyAwtGlColorColorConverter () {
 @public
  OrgApacheHarmonyAwtGlColorColorScaler *scaler_;
}

/*!
 @brief Creates one-row NativeImageFormat, using either nCols if it is positive,
  or arr.length to determine the number of pixels
 @param t - transform
 @param arr - short array or null if nCols is positive
 @param nCols - number of pixels in the array or 0 if array is not null
 @param inArg - is it an input or output array
 @return one-row NativeImageFormat
 */
- (OrgApacheHarmonyAwtGlColorNativeImageFormat *)createImageFormatWithOrgApacheHarmonyAwtGlColorICC_Transform:(OrgApacheHarmonyAwtGlColorICC_Transform *)t
                                                                                               withShortArray:(IOSShortArray *)arr
                                                                                                      withInt:(jint)nCols
                                                                                                  withBoolean:(jboolean)inArg;

@end

J2OBJC_FIELD_SETTER(OrgApacheHarmonyAwtGlColorColorConverter, scaler_, OrgApacheHarmonyAwtGlColorColorScaler *)

__attribute__((unused)) static OrgApacheHarmonyAwtGlColorNativeImageFormat *OrgApacheHarmonyAwtGlColorColorConverter_createImageFormatWithOrgApacheHarmonyAwtGlColorICC_Transform_withShortArray_withInt_withBoolean_(OrgApacheHarmonyAwtGlColorColorConverter *self, OrgApacheHarmonyAwtGlColorICC_Transform *t, IOSShortArray *arr, jint nCols, jboolean inArg);

#line 1 "/Users/desarrolloabamobile/Documents/JAVA/pades-ios/src/main/java/org/apache/harmony/awt/gl/color/ColorConverter.java"


#line 29
@implementation OrgApacheHarmonyAwtGlColorColorConverter

J2OBJC_IGNORE_DESIGNATED_BEGIN

#line 29
- (instancetype)init {
  OrgApacheHarmonyAwtGlColorColorConverter_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END


#line 32
- (void)loadScalingDataWithHarmonyJavaAwtColorColorSpace:(HarmonyJavaAwtColorColorSpace *)cs {
  [((OrgApacheHarmonyAwtGlColorColorScaler *) nil_chk(scaler_)) loadScalingDataWithHarmonyJavaAwtColorColorSpace:cs];
}


#line 137
- (IOSObjectArray *)translateColorWithOrgApacheHarmonyAwtGlColorICC_Transform:(OrgApacheHarmonyAwtGlColorICC_Transform *)t
                                                              withFloatArray2:(IOSObjectArray *)buffer
                                            withHarmonyJavaAwtColorColorSpace:(HarmonyJavaAwtColorColorSpace *)srcCS
                                            withHarmonyJavaAwtColorColorSpace:(HarmonyJavaAwtColorColorSpace *)dstCS
                                                                      withInt:(jint)nPixels {
  
#line 139
  if (srcCS != nil) {
    [((OrgApacheHarmonyAwtGlColorColorScaler *) nil_chk(scaler_)) loadScalingDataWithHarmonyJavaAwtColorColorSpace:srcCS];
  }
  jint nSrcChannels = [((OrgApacheHarmonyAwtGlColorICC_Transform *) nil_chk(t)) getNumInputChannels];
  IOSShortArray *srcShortData = [IOSShortArray newArrayWithLength:nPixels * nSrcChannels];
  for (jint i = 0, srcDataPos = 0; i < nPixels; i++) {
    [((OrgApacheHarmonyAwtGlColorColorScaler *) nil_chk(scaler_)) scale__WithFloatArray:IOSObjectArray_Get(nil_chk(buffer), i) withShortArray:srcShortData withInt:srcDataPos];
    srcDataPos += nSrcChannels;
  }
  
#line 150
  IOSShortArray *dstShortData = [self translateColorWithOrgApacheHarmonyAwtGlColorICC_Transform:t withShortArray:srcShortData withShortArray:nil];
  
#line 152
  jint nDstChannels = [t getNumOutputChannels];
  jint bufferSize = ((IOSFloatArray *) nil_chk(IOSObjectArray_Get(nil_chk(buffer), 0)))->size_;
  if (bufferSize < nDstChannels + 1) {
    for (jint i = 0; i < nPixels; i++) {
      
#line 157
      (void) IOSObjectArray_SetAndConsume(buffer, i, [IOSFloatArray newArrayWithLength:nDstChannels + 1]);
    }
  }
  
#line 162
  if (dstCS != nil) {
    [((OrgApacheHarmonyAwtGlColorColorScaler *) nil_chk(scaler_)) loadScalingDataWithHarmonyJavaAwtColorColorSpace:dstCS];
  }
  for (jint i = 0, dstDataPos = 0; i < nPixels; i++) {
    [((OrgApacheHarmonyAwtGlColorColorScaler *) nil_chk(scaler_)) unscaleWithFloatArray:IOSObjectArray_Get(buffer, i) withShortArray:dstShortData withInt:dstDataPos];
    dstDataPos += nDstChannels;
  }
  
#line 170
  return buffer;
}


#line 221
- (IOSShortArray *)translateColorWithOrgApacheHarmonyAwtGlColorICC_Transform:(OrgApacheHarmonyAwtGlColorICC_Transform *)t
                                                              withShortArray:(IOSShortArray *)src
                                                              withShortArray:(IOSShortArray *)dst {
  
#line 222
  OrgApacheHarmonyAwtGlColorNativeImageFormat *srcFmt = OrgApacheHarmonyAwtGlColorColorConverter_createImageFormatWithOrgApacheHarmonyAwtGlColorICC_Transform_withShortArray_withInt_withBoolean_(self, t, src, 0, true);
  OrgApacheHarmonyAwtGlColorNativeImageFormat *dstFmt = OrgApacheHarmonyAwtGlColorColorConverter_createImageFormatWithOrgApacheHarmonyAwtGlColorICC_Transform_withShortArray_withInt_withBoolean_(self, t, dst, [((OrgApacheHarmonyAwtGlColorNativeImageFormat *) nil_chk(srcFmt)) getNumCols], false);
  
#line 225
  [((OrgApacheHarmonyAwtGlColorICC_Transform *) nil_chk(t)) translateColorsWithOrgApacheHarmonyAwtGlColorNativeImageFormat:srcFmt withOrgApacheHarmonyAwtGlColorNativeImageFormat:dstFmt];
  
#line 227
  return (IOSShortArray *) cast_chk([((OrgApacheHarmonyAwtGlColorNativeImageFormat *) nil_chk(dstFmt)) getChannelData], [IOSShortArray class]);
}


#line 260
- (OrgApacheHarmonyAwtGlColorNativeImageFormat *)createImageFormatWithOrgApacheHarmonyAwtGlColorICC_Transform:(OrgApacheHarmonyAwtGlColorICC_Transform *)t
                                                                                               withShortArray:(IOSShortArray *)arr
                                                                                                      withInt:(jint)nCols
                                                                                                  withBoolean:(jboolean)inArg {
  return OrgApacheHarmonyAwtGlColorColorConverter_createImageFormatWithOrgApacheHarmonyAwtGlColorICC_Transform_withShortArray_withInt_withBoolean_(self, t, arr, nCols, inArg);
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 0, 1, -1, -1, -1, -1 },
    { NULL, "[[F", 0x1, 2, 3, -1, -1, -1, -1 },
    { NULL, "[S", 0x1, 2, 4, -1, -1, -1, -1 },
    { NULL, "LOrgApacheHarmonyAwtGlColorNativeImageFormat;", 0x2, 5, 6, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(init);
  methods[1].selector = @selector(loadScalingDataWithHarmonyJavaAwtColorColorSpace:);
  methods[2].selector = @selector(translateColorWithOrgApacheHarmonyAwtGlColorICC_Transform:withFloatArray2:withHarmonyJavaAwtColorColorSpace:withHarmonyJavaAwtColorColorSpace:withInt:);
  methods[3].selector = @selector(translateColorWithOrgApacheHarmonyAwtGlColorICC_Transform:withShortArray:withShortArray:);
  methods[4].selector = @selector(createImageFormatWithOrgApacheHarmonyAwtGlColorICC_Transform:withShortArray:withInt:withBoolean:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "scaler_", "LOrgApacheHarmonyAwtGlColorColorScaler;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "loadScalingData", "LHarmonyJavaAwtColorColorSpace;", "translateColor", "LOrgApacheHarmonyAwtGlColorICC_Transform;[[FLHarmonyJavaAwtColorColorSpace;LHarmonyJavaAwtColorColorSpace;I", "LOrgApacheHarmonyAwtGlColorICC_Transform;[S[S", "createImageFormat", "LOrgApacheHarmonyAwtGlColorICC_Transform;[SIZ" };
  static const J2ObjcClassInfo _OrgApacheHarmonyAwtGlColorColorConverter = { "ColorConverter", "org.apache.harmony.awt.gl.color", ptrTable, methods, fields, 7, 0x1, 5, 1, -1, -1, -1, -1, -1 };
  return &_OrgApacheHarmonyAwtGlColorColorConverter;
}

@end


#line 29
void OrgApacheHarmonyAwtGlColorColorConverter_init(OrgApacheHarmonyAwtGlColorColorConverter *self) {
  NSObject_init(self);
  self->scaler_ = new_OrgApacheHarmonyAwtGlColorColorScaler_init();
}


#line 29
OrgApacheHarmonyAwtGlColorColorConverter *new_OrgApacheHarmonyAwtGlColorColorConverter_init() {
  J2OBJC_NEW_IMPL(OrgApacheHarmonyAwtGlColorColorConverter, init)
}


#line 29
OrgApacheHarmonyAwtGlColorColorConverter *create_OrgApacheHarmonyAwtGlColorColorConverter_init() {
  J2OBJC_CREATE_IMPL(OrgApacheHarmonyAwtGlColorColorConverter, init)
}


#line 260
OrgApacheHarmonyAwtGlColorNativeImageFormat *OrgApacheHarmonyAwtGlColorColorConverter_createImageFormatWithOrgApacheHarmonyAwtGlColorICC_Transform_withShortArray_withInt_withBoolean_(OrgApacheHarmonyAwtGlColorColorConverter *self, OrgApacheHarmonyAwtGlColorICC_Transform *t, IOSShortArray *arr, jint nCols, jboolean inArg) {
  jint nComponents = inArg ? [((OrgApacheHarmonyAwtGlColorICC_Transform *) nil_chk(t)) getNumInputChannels] : [((OrgApacheHarmonyAwtGlColorICC_Transform *) nil_chk(t)) getNumOutputChannels];
  
#line 263
  if (arr == nil || arr->size_ < nCols * nComponents) {
    arr = [IOSShortArray newArrayWithLength:nCols * nComponents];
  }
  
#line 267
  if (nCols == 0)
#line 268
  nCols = JreIntDiv(arr->size_, nComponents);
  
#line 270
  return new_OrgApacheHarmonyAwtGlColorNativeImageFormat_initPackagePrivateWithId_withInt_withInt_withInt_(arr, nComponents, 1, nCols);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheHarmonyAwtGlColorColorConverter)
