//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/desarrolloabamobile/Downloads/pades-ios-mini/src/main/java/org/spongycastle/util/encoders/HexEncoder.java
//

#include "HexEncoder.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/io/IOException.h"
#include "java/io/OutputStream.h"

#if !__has_feature(objc_arc)
#error "HexEncoder must be compiled with ARC (-fobjc-arc)"
#endif

@interface OrgSpongycastleUtilEncodersHexEncoder ()

+ (jboolean)ignoreWithChar:(jchar)c;

@end

__attribute__((unused)) static jboolean OrgSpongycastleUtilEncodersHexEncoder_ignoreWithChar_(jchar c);

#line 1 "/Users/desarrolloabamobile/Downloads/pades-ios-mini/src/main/java/org/spongycastle/util/encoders/HexEncoder.java"


#line 9
@implementation OrgSpongycastleUtilEncodersHexEncoder


#line 23
- (void)initialiseDecodingTable {
  
#line 25
  for (jint i = 0; i < ((IOSByteArray *) nil_chk(decodingTable_))->size_; i++) {
    
#line 27
    *IOSByteArray_GetRef(decodingTable_, i) = (jbyte) (jint) 0xff;
  }
  
#line 30
  for (jint i = 0; i < ((IOSByteArray *) nil_chk(encodingTable_))->size_; i++) {
    
#line 32
    *IOSByteArray_GetRef(decodingTable_, IOSByteArray_Get(encodingTable_, i)) = (jbyte) i;
  }
  
#line 35
  *IOSByteArray_GetRef(decodingTable_, 'A') = IOSByteArray_Get(decodingTable_, 'a');
  *IOSByteArray_GetRef(decodingTable_, 'B') = IOSByteArray_Get(decodingTable_, 'b');
  *IOSByteArray_GetRef(decodingTable_, 'C') = IOSByteArray_Get(decodingTable_, 'c');
  *IOSByteArray_GetRef(decodingTable_, 'D') = IOSByteArray_Get(decodingTable_, 'd');
  *IOSByteArray_GetRef(decodingTable_, 'E') = IOSByteArray_Get(decodingTable_, 'e');
  *IOSByteArray_GetRef(decodingTable_, 'F') = IOSByteArray_Get(decodingTable_, 'f');
}

J2OBJC_IGNORE_DESIGNATED_BEGIN

#line 43
- (instancetype)init {
  OrgSpongycastleUtilEncodersHexEncoder_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END


#line 53
- (jint)encodeWithByteArray:(IOSByteArray *)data
                    withInt:(jint)off
                    withInt:(jint)length
     withJavaIoOutputStream:(JavaIoOutputStream *)outArg {
  
#line 60
  for (jint i = off; i < (off + length); i++) {
    
#line 62
    jint v = IOSByteArray_Get(nil_chk(data), i) & (jint) 0xff;
    
#line 64
    [((JavaIoOutputStream *) nil_chk(outArg)) writeWithInt:IOSByteArray_Get(nil_chk(encodingTable_), (JreURShift32(v, 4)))];
    [outArg writeWithInt:IOSByteArray_Get(encodingTable_, v & (jint) 0xf)];
  }
  
#line 68
  return length * 2;
}


#line 71
+ (jboolean)ignoreWithChar:(jchar)c {
  return OrgSpongycastleUtilEncodersHexEncoder_ignoreWithChar_(c);
}


#line 83
- (jint)decodeWithByteArray:(IOSByteArray *)data
                    withInt:(jint)off
                    withInt:(jint)length
     withJavaIoOutputStream:(JavaIoOutputStream *)outArg {
  
#line 90
  jbyte b1;
  
#line 90
  jbyte b2;
  jint outLen = 0;
  
#line 93
  jint end = off + length;
  
#line 95
  while (end > off) {
    
#line 97
    if (!OrgSpongycastleUtilEncodersHexEncoder_ignoreWithChar_((jchar) IOSByteArray_Get(nil_chk(data), end - 1))) {
      
#line 99
      break;
    }
    
#line 102
    end--;
  }
  
#line 105
  jint i = off;
  while (i < end) {
    
#line 108
    while (i < end && OrgSpongycastleUtilEncodersHexEncoder_ignoreWithChar_((jchar) IOSByteArray_Get(nil_chk(data), i))) {
      
#line 110
      i++;
    }
    
#line 113
    b1 = IOSByteArray_Get(nil_chk(decodingTable_), IOSByteArray_Get(nil_chk(data), i++));
    
#line 115
    while (i < end && OrgSpongycastleUtilEncodersHexEncoder_ignoreWithChar_((jchar) IOSByteArray_Get(data, i))) {
      
#line 117
      i++;
    }
    
#line 120
    b2 = IOSByteArray_Get(decodingTable_, IOSByteArray_Get(data, i++));
    
#line 122
    if ((b1 | b2) < 0) {
      
#line 124
      @throw new_JavaIoIOException_initWithNSString_(@"invalid characters encountered in Hex data");
    }
    
#line 127
    [((JavaIoOutputStream *) nil_chk(outArg)) writeWithInt:(JreLShift32(b1, 4)) | b2];
    
#line 129
    outLen++;
  }
  
#line 132
  return outLen;
}


#line 141
- (jint)decodeWithNSString:(NSString *)data
    withJavaIoOutputStream:(JavaIoOutputStream *)outArg {
  
#line 146
  jbyte b1;
  
#line 146
  jbyte b2;
  jint length = 0;
  
#line 149
  jint end = [((NSString *) nil_chk(data)) java_length];
  
#line 151
  while (end > 0) {
    
#line 153
    if (!OrgSpongycastleUtilEncodersHexEncoder_ignoreWithChar_([data charAtWithInt:end - 1])) {
      
#line 155
      break;
    }
    
#line 158
    end--;
  }
  
#line 161
  jint i = 0;
  while (i < end) {
    
#line 164
    while (i < end && OrgSpongycastleUtilEncodersHexEncoder_ignoreWithChar_([data charAtWithInt:i])) {
      
#line 166
      i++;
    }
    
#line 169
    b1 = IOSByteArray_Get(nil_chk(decodingTable_), [data charAtWithInt:i++]);
    
#line 171
    while (i < end && OrgSpongycastleUtilEncodersHexEncoder_ignoreWithChar_([data charAtWithInt:i])) {
      
#line 173
      i++;
    }
    
#line 176
    b2 = IOSByteArray_Get(decodingTable_, [data charAtWithInt:i++]);
    
#line 178
    if ((b1 | b2) < 0) {
      
#line 180
      @throw new_JavaIoIOException_initWithNSString_(@"invalid characters encountered in Hex string");
    }
    
#line 183
    [((JavaIoOutputStream *) nil_chk(outArg)) writeWithInt:(JreLShift32(b1, 4)) | b2];
    
#line 185
    length++;
  }
  
#line 188
  return length;
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, "V", 0x4, -1, -1, -1, -1, -1, -1 },
    { NULL, NULL, 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x1, 0, 1, 2, -1, -1, -1 },
    { NULL, "Z", 0xa, 3, 4, -1, -1, -1, -1 },
    { NULL, "I", 0x1, 5, 1, 2, -1, -1, -1 },
    { NULL, "I", 0x1, 5, 6, 2, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initialiseDecodingTable);
  methods[1].selector = @selector(init);
  methods[2].selector = @selector(encodeWithByteArray:withInt:withInt:withJavaIoOutputStream:);
  methods[3].selector = @selector(ignoreWithChar:);
  methods[4].selector = @selector(decodeWithByteArray:withInt:withInt:withJavaIoOutputStream:);
  methods[5].selector = @selector(decodeWithNSString:withJavaIoOutputStream:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "encodingTable_", "[B", .constantValue.asLong = 0, 0x14, -1, -1, -1, -1 },
    { "decodingTable_", "[B", .constantValue.asLong = 0, 0x14, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "encode", "[BIILJavaIoOutputStream;", "LJavaIoIOException;", "ignore", "C", "decode", "LNSString;LJavaIoOutputStream;" };
  static const J2ObjcClassInfo _OrgSpongycastleUtilEncodersHexEncoder = { "HexEncoder", "org.spongycastle.util.encoders", ptrTable, methods, fields, 7, 0x1, 6, 2, -1, -1, -1, -1, -1 };
  return &_OrgSpongycastleUtilEncodersHexEncoder;
}

@end


#line 43
void OrgSpongycastleUtilEncodersHexEncoder_init(OrgSpongycastleUtilEncodersHexEncoder *self) {
  NSObject_init(self);
  self->encodingTable_ = [IOSByteArray newArrayWithBytes:(jbyte[]){
#line 14
    (jbyte) '0', (jbyte) '1', (jbyte) '2', (jbyte) '3', (jbyte) '4', (jbyte) '5', (jbyte) '6', (jbyte) '7',
#line 15
    (jbyte) '8', (jbyte) '9', (jbyte) 'a', (jbyte) 'b', (jbyte) 'c', (jbyte) 'd', (jbyte) 'e', (jbyte) 'f' } count:16];
    self->decodingTable_ = [IOSByteArray newArrayWithLength:
#line 21
    128];
    
#line 45
    [self initialiseDecodingTable];
  }


#line 43
OrgSpongycastleUtilEncodersHexEncoder *new_OrgSpongycastleUtilEncodersHexEncoder_init() {
  J2OBJC_NEW_IMPL(OrgSpongycastleUtilEncodersHexEncoder, init)
}


#line 43
OrgSpongycastleUtilEncodersHexEncoder *create_OrgSpongycastleUtilEncodersHexEncoder_init() {
  J2OBJC_CREATE_IMPL(OrgSpongycastleUtilEncodersHexEncoder, init)
}


#line 71
jboolean OrgSpongycastleUtilEncodersHexEncoder_ignoreWithChar_(jchar c) {
  OrgSpongycastleUtilEncodersHexEncoder_initialize();
  
#line 74
  return c == 0x000a || c == 0x000d || c == 0x0009 || c == ' ';
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgSpongycastleUtilEncodersHexEncoder)
