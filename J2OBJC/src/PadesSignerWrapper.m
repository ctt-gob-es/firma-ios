//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/desarrolloabamobile/Documents/JAVA/pades-ios/src/main/java/es/gob/afirma/ios/PadesSignerWrapper.java
//

#include "AOCancelledOperationException.h"
#include "AOException.h"
#include "AOPDFSigner.h"
#include "BadPdfPasswordException.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "IncorrectPageException.h"
#include "InvalidPdfException.h"
#include "InvalidSignaturePositionException.h"
#include "J2ObjC_source.h"
#include "PadesSignerWrapper.h"
#include "PdfExtraParams.h"
#include "PdfFormModifiedException.h"
#include "PdfHasUnregisteredSignaturesException.h"
#include "PdfIsCertifiedException.h"
#include "PdfIsPasswordProtectedException.h"
#include "SignatureError.h"
#include "SignatureResult.h"
#include "SupportRetry.h"
#include "SuspectedPSAException.h"
#include "java/io/IOException.h"
#include "java/lang/Boolean.h"
#include "java/lang/Throwable.h"
#include "java/security/PrivateKey.h"
#include "java/util/Properties.h"
#include "java/util/logging/Level.h"
#include "java/util/logging/Logger.h"

#if !__has_feature(objc_arc)
#error "PadesSignerWrapper must be compiled with ARC (-fobjc-arc)"
#endif

@interface EsGobAfirmaIosPadesSignerWrapper () {
 @public
  EsGobAfirmaSignersPadesAOPDFSigner *signer_;
}

@end

J2OBJC_FIELD_SETTER(EsGobAfirmaIosPadesSignerWrapper, signer_, EsGobAfirmaSignersPadesAOPDFSigner *)

inline JavaUtilLoggingLogger *EsGobAfirmaIosPadesSignerWrapper_get_LOGGER(void);
static JavaUtilLoggingLogger *EsGobAfirmaIosPadesSignerWrapper_LOGGER;
J2OBJC_STATIC_FIELD_OBJ_FINAL(EsGobAfirmaIosPadesSignerWrapper, LOGGER, JavaUtilLoggingLogger *)

#line 1 "/Users/desarrolloabamobile/Documents/JAVA/pades-ios/src/main/java/es/gob/afirma/ios/PadesSignerWrapper.java"

J2OBJC_INITIALIZED_DEFN(EsGobAfirmaIosPadesSignerWrapper)


#line 23
@implementation EsGobAfirmaIosPadesSignerWrapper

J2OBJC_IGNORE_DESIGNATED_BEGIN

#line 29
- (instancetype)init {
  EsGobAfirmaIosPadesSignerWrapper_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END


#line 33
- (EsGobAfirmaIosSignatureResult *)signWithByteArray:(IOSByteArray *)inPdf
                                        withNSString:(NSString *)signAlgorithm
                          withJavaSecurityPrivateKey:(id<JavaSecurityPrivateKey>)key
                withJavaSecurityCertCertificateArray:(IOSObjectArray *)certChain
                              withJavaUtilProperties:(JavaUtilProperties *)xParams {
  
#line 39
  IOSByteArray *pdfSignature;
  @try {
    pdfSignature = [((EsGobAfirmaSignersPadesAOPDFSigner *) nil_chk(self->signer_)) signWithByteArray:inPdf withNSString:signAlgorithm withJavaSecurityPrivateKey:key withJavaSecurityCertCertificateArray:certChain withJavaUtilProperties:xParams];
  }
  @catch (
#line 42
  EsGobAfirmaSignersPadesCommonPdfIsPasswordProtectedException *e) {
    [((JavaUtilLoggingLogger *) nil_chk(EsGobAfirmaIosPadesSignerWrapper_LOGGER)) logWithJavaUtilLoggingLevel:JreLoadStatic(JavaUtilLoggingLevel, SEVERE) withNSString:@"El PDF esta protegido por contrasena" withJavaLangThrowable:e];
    return new_EsGobAfirmaIosSignatureResult_initWithInt_withNSString_(EsGobAfirmaIosSignatureError_PASSWORD_PROTECTED, [e getMessage]);
  }
  @catch (
#line 45
  EsGobAfirmaSignersPadesCommonBadPdfPasswordException *e) {
    [((JavaUtilLoggingLogger *) nil_chk(EsGobAfirmaIosPadesSignerWrapper_LOGGER)) logWithJavaUtilLoggingLevel:JreLoadStatic(JavaUtilLoggingLevel, SEVERE) withNSString:@"La contrasena del PDF no es correcta" withJavaLangThrowable:e];
    return new_EsGobAfirmaIosSignatureResult_initWithInt_withNSString_(EsGobAfirmaIosSignatureError_BAD_PASSWORD, @"La contrasena del PDF no es correcta");
  }
  @catch (
#line 48
  EsGobAfirmaSignersPadesInvalidPdfException *e) {
    [((JavaUtilLoggingLogger *) nil_chk(EsGobAfirmaIosPadesSignerWrapper_LOGGER)) logWithJavaUtilLoggingLevel:JreLoadStatic(JavaUtilLoggingLevel, SEVERE) withNSString:@"El documento no es un PDF soportado" withJavaLangThrowable:e];
    return new_EsGobAfirmaIosSignatureResult_initWithInt_withNSString_(EsGobAfirmaIosSignatureError_INVALID_PDF, @"El documento no es un PDF soportado");
  }
  @catch (
#line 51
  EsGobAfirmaSignersPadesIncorrectPageException *e) {
    [((JavaUtilLoggingLogger *) nil_chk(EsGobAfirmaIosPadesSignerWrapper_LOGGER)) logWithJavaUtilLoggingLevel:JreLoadStatic(JavaUtilLoggingLevel, SEVERE) withNSString:@"Se selecciono una pagina no valida para la rubrica del documento" withJavaLangThrowable:e];
    return new_EsGobAfirmaIosSignatureResult_initWithInt_withNSString_(EsGobAfirmaIosSignatureError_INVALID_PAGE, @"Se selecciono una pagina no valida para la rubrica del documento");
  }
  @catch (
#line 54
  EsGobAfirmaSignersPadesInvalidSignaturePositionException *e) {
    [((JavaUtilLoggingLogger *) nil_chk(EsGobAfirmaIosPadesSignerWrapper_LOGGER)) logWithJavaUtilLoggingLevel:JreLoadStatic(JavaUtilLoggingLevel, SEVERE) withNSString:@"Se selecciono una posicion no valida para la rubrica del documento" withJavaLangThrowable:e];
    return new_EsGobAfirmaIosSignatureResult_initWithInt_withNSString_(EsGobAfirmaIosSignatureError_INVALID_RUBRIC_POSITION, @"Se selecciono una posicion no valida para la rubrica del documento");
  }
  @catch (
#line 57
  EsGobAfirmaSignersPadesCommonPdfFormModifiedException *e) {
    [((JavaUtilLoggingLogger *) nil_chk(EsGobAfirmaIosPadesSignerWrapper_LOGGER)) logWithJavaUtilLoggingLevel:JreLoadStatic(JavaUtilLoggingLevel, WARNING) withNSString:@"Hay sospechas de que uno de los campos de formulario ha sido modificado despues de una firma anterior" withJavaLangThrowable:e];
    EsGobAfirmaIosSupportRetry *retry = new_EsGobAfirmaIosSupportRetry_initWithNSString_withNSString_(EsGobAfirmaSignersPadesCommonPdfExtraParams_ALLOW_SIGN_MODIFIED_FORM, [((JavaLangBoolean *) nil_chk(JreLoadStatic(JavaLangBoolean, TRUE))) description]);
    return new_EsGobAfirmaIosSignatureResult_initWithInt_withNSString_withEsGobAfirmaIosSupportRetry_(EsGobAfirmaIosSignatureError_FORM_MODIFIED, @"Hay sospechas de que uno de los campos de formulario ha sido modificado despues de una firma anterior", retry);
  }
  @catch (
#line 61
  EsGobAfirmaSignersPadesCommonSuspectedPSAException *e) {
    [((JavaUtilLoggingLogger *) nil_chk(EsGobAfirmaIosPadesSignerWrapper_LOGGER)) logWithJavaUtilLoggingLevel:JreLoadStatic(JavaUtilLoggingLevel, WARNING) withNSString:@"Hay sospechas de que el documento ha sido modificado despues de una firma anterior" withJavaLangThrowable:e];
    EsGobAfirmaIosSupportRetry *retry = new_EsGobAfirmaIosSupportRetry_initWithNSString_withNSString_(EsGobAfirmaSignersPadesCommonPdfExtraParams_ALLOW_SHADOW_ATTACK, [((JavaLangBoolean *) nil_chk(JreLoadStatic(JavaLangBoolean, TRUE))) description]);
    return new_EsGobAfirmaIosSignatureResult_initWithInt_withNSString_withEsGobAfirmaIosSupportRetry_(EsGobAfirmaIosSignatureError_SUSPECTED_PSA, @"Hay sospechas de que el documento ha sido modificado despues de una firma anterior", retry);
  }
  @catch (
#line 65
  EsGobAfirmaSignersPadesCommonPdfHasUnregisteredSignaturesException *e) {
    [((JavaUtilLoggingLogger *) nil_chk(EsGobAfirmaIosPadesSignerWrapper_LOGGER)) logWithJavaUtilLoggingLevel:JreLoadStatic(JavaUtilLoggingLevel, WARNING) withNSString:@"El documento tiene firmas anteriores sin registrar correctamente" withJavaLangThrowable:e];
    EsGobAfirmaIosSupportRetry *retry = new_EsGobAfirmaIosSupportRetry_initWithNSString_withNSString_(EsGobAfirmaSignersPadesCommonPdfExtraParams_ALLOW_COSIGNING_UNREGISTERED_SIGNATURES, [((JavaLangBoolean *) nil_chk(JreLoadStatic(JavaLangBoolean, TRUE))) description]);
    return new_EsGobAfirmaIosSignatureResult_initWithInt_withNSString_withEsGobAfirmaIosSupportRetry_(EsGobAfirmaIosSignatureError_UNREGISTER_SIGNATURES, @"El documento tiene firmas anteriores sin registrar correctamente", retry);
  }
  @catch (
#line 69
  EsGobAfirmaSignersPadesCommonPdfIsCertifiedException *e) {
    [((JavaUtilLoggingLogger *) nil_chk(EsGobAfirmaIosPadesSignerWrapper_LOGGER)) logWithJavaUtilLoggingLevel:JreLoadStatic(JavaUtilLoggingLevel, WARNING) withNSString:@"El documento esta certificado y una nueva firma puede invalidar las anteriores" withJavaLangThrowable:e];
    EsGobAfirmaIosSupportRetry *retry = new_EsGobAfirmaIosSupportRetry_initWithNSString_withNSString_(EsGobAfirmaSignersPadesCommonPdfExtraParams_ALLOW_COSIGNING_UNREGISTERED_SIGNATURES, [((JavaLangBoolean *) nil_chk(JreLoadStatic(JavaLangBoolean, TRUE))) description]);
    return new_EsGobAfirmaIosSignatureResult_initWithInt_withNSString_withEsGobAfirmaIosSupportRetry_(EsGobAfirmaIosSignatureError_CERTIFIED_DOCUMENT, @"El documento esta certificado y una nueva firma puede invalidar las anteriores", retry);
  }
  @catch (
#line 73
  EsGobAfirmaCoreAOCancelledOperationException *e) {
    [((JavaUtilLoggingLogger *) nil_chk(EsGobAfirmaIosPadesSignerWrapper_LOGGER)) logWithJavaUtilLoggingLevel:JreLoadStatic(JavaUtilLoggingLevel, WARNING) withNSString:@"Operacion cancelada por el usuario" withJavaLangThrowable:e];
    return new_EsGobAfirmaIosSignatureResult_initWithInt_withNSString_(EsGobAfirmaIosSignatureError_CANCELLED, @"Operacion cancelada por el usuario");
  }
  @catch (
#line 76
  EsGobAfirmaCoreAOException *e) {
    [((JavaUtilLoggingLogger *) nil_chk(EsGobAfirmaIosPadesSignerWrapper_LOGGER)) logWithJavaUtilLoggingLevel:JreLoadStatic(JavaUtilLoggingLevel, SEVERE) withNSString:JreStrcat("$$", @"Error desconocido durante la operacion: ", [e getMessage]) withJavaLangThrowable:e];
    return new_EsGobAfirmaIosSignatureResult_initWithInt_withNSString_(EsGobAfirmaIosSignatureError_UNKNOWN, [e getMessage]);
  }
  @catch (
#line 79
  JavaIoIOException *e) {
    [((JavaUtilLoggingLogger *) nil_chk(EsGobAfirmaIosPadesSignerWrapper_LOGGER)) logWithJavaUtilLoggingLevel:JreLoadStatic(JavaUtilLoggingLevel, SEVERE) withNSString:@"Error en una operacion de lectura/escritura" withJavaLangThrowable:e];
    return new_EsGobAfirmaIosSignatureResult_initWithInt_withNSString_(EsGobAfirmaIosSignatureError_INPUT_OUTPUT_ERROR, @"Error en una operacion de lectura/escritura");
  }
  @catch (
#line 82
  JavaLangThrowable *e) {
    [((JavaUtilLoggingLogger *) nil_chk(EsGobAfirmaIosPadesSignerWrapper_LOGGER)) logWithJavaUtilLoggingLevel:JreLoadStatic(JavaUtilLoggingLevel, SEVERE) withNSString:@"Error desconocido grave" withJavaLangThrowable:e];
    return new_EsGobAfirmaIosSignatureResult_initWithInt_withNSString_(EsGobAfirmaIosSignatureError_UNKNOWN_SEVERE, @"Error desconocido grave");
  }
  
#line 87
  return new_EsGobAfirmaIosSignatureResult_initWithByteArray_(pdfSignature);
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LEsGobAfirmaIosSignatureResult;", 0x1, 0, 1, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(init);
  methods[1].selector = @selector(signWithByteArray:withNSString:withJavaSecurityPrivateKey:withJavaSecurityCertCertificateArray:withJavaUtilProperties:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "LOGGER", "LJavaUtilLoggingLogger;", .constantValue.asLong = 0, 0x1a, -1, 2, -1, -1 },
    { "signer_", "LEsGobAfirmaSignersPadesAOPDFSigner;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "sign", "[BLNSString;LJavaSecurityPrivateKey;[LJavaSecurityCertCertificate;LJavaUtilProperties;", &EsGobAfirmaIosPadesSignerWrapper_LOGGER };
  static const J2ObjcClassInfo _EsGobAfirmaIosPadesSignerWrapper = { "PadesSignerWrapper", "es.gob.afirma.ios", ptrTable, methods, fields, 7, 0x1, 2, 2, -1, -1, -1, -1, -1 };
  return &_EsGobAfirmaIosPadesSignerWrapper;
}

+ (void)initialize {
  if (self == [EsGobAfirmaIosPadesSignerWrapper class]) {
    EsGobAfirmaIosPadesSignerWrapper_LOGGER = JavaUtilLoggingLogger_getLoggerWithNSString_(
#line 25
    @"es.gob.afirma");
    J2OBJC_SET_INITIALIZED(EsGobAfirmaIosPadesSignerWrapper)
  }
}

@end


#line 29
void EsGobAfirmaIosPadesSignerWrapper_init(EsGobAfirmaIosPadesSignerWrapper *self) {
  NSObject_init(self);
  
#line 30
  self->signer_ = new_EsGobAfirmaSignersPadesAOPDFSigner_init();
}


#line 29
EsGobAfirmaIosPadesSignerWrapper *new_EsGobAfirmaIosPadesSignerWrapper_init() {
  J2OBJC_NEW_IMPL(EsGobAfirmaIosPadesSignerWrapper, init)
}


#line 29
EsGobAfirmaIosPadesSignerWrapper *create_EsGobAfirmaIosPadesSignerWrapper_init() {
  J2OBJC_CREATE_IMPL(EsGobAfirmaIosPadesSignerWrapper, init)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(EsGobAfirmaIosPadesSignerWrapper)
