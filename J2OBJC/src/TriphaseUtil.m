//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/desarrolloabamobile/Downloads/pades-ios-mini/src/main/java/es/gob/afirma/core/signers/TriphaseUtil.java
//

#include "Base64.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "TriphaseUtil.h"
#include "java/lang/Boolean.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/StringBuilder.h"
#include "java/security/cert/Certificate.h"
#include "java/util/Properties.h"

#if !__has_feature(objc_arc)
#error "TriphaseUtil must be compiled with ARC (-fobjc-arc)"
#endif

@interface EsGobAfirmaCoreSignersTriphaseUtil ()

- (instancetype)init;

@end

/*!
 @brief Indica, mediante un <code>true</code> o <code>false</code>, que debe incluirse en la firma 
 &uacute;nicamente el certificado utilizado para firmar y no su cadena de certificaci&oacute;n
  completa.Por defecto, se incluir&aacute; toda la cadena de certificaci&oacute;n
  (propiedad compartida con CAdES y PAdES).
 */
inline NSString *EsGobAfirmaCoreSignersTriphaseUtil_get_INCLUDE_ONLY_SIGNNING_CERTIFICATE(void);
static NSString *EsGobAfirmaCoreSignersTriphaseUtil_INCLUDE_ONLY_SIGNNING_CERTIFICATE = @"includeOnlySignningCertificate";
J2OBJC_STATIC_FIELD_OBJ_FINAL(EsGobAfirmaCoreSignersTriphaseUtil, INCLUDE_ONLY_SIGNNING_CERTIFICATE, NSString *)

/*!
 @brief Separador que debe usarse para incluir varios certificados dentro del mismo par&aacute;metro.
 */
inline NSString *EsGobAfirmaCoreSignersTriphaseUtil_get_PARAM_NAME_CERT_SEPARATOR(void);
static NSString *EsGobAfirmaCoreSignersTriphaseUtil_PARAM_NAME_CERT_SEPARATOR = @",";
J2OBJC_STATIC_FIELD_OBJ_FINAL(EsGobAfirmaCoreSignersTriphaseUtil, PARAM_NAME_CERT_SEPARATOR, NSString *)

__attribute__((unused)) static void EsGobAfirmaCoreSignersTriphaseUtil_init(EsGobAfirmaCoreSignersTriphaseUtil *self);

__attribute__((unused)) static EsGobAfirmaCoreSignersTriphaseUtil *new_EsGobAfirmaCoreSignersTriphaseUtil_init(void) NS_RETURNS_RETAINED;

__attribute__((unused)) static EsGobAfirmaCoreSignersTriphaseUtil *create_EsGobAfirmaCoreSignersTriphaseUtil_init(void);

#line 1 "/Users/desarrolloabamobile/Downloads/pades-ios-mini/src/main/java/es/gob/afirma/core/signers/TriphaseUtil.java"


#line 20
@implementation EsGobAfirmaCoreSignersTriphaseUtil

J2OBJC_IGNORE_DESIGNATED_BEGIN

#line 31
- (instancetype)init {
  EsGobAfirmaCoreSignersTriphaseUtil_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END


#line 43
+ (NSString *)prepareCertChainParamWithJavaSecurityCertCertificateArray:(IOSObjectArray *)certChain
                                                 withJavaUtilProperties:(JavaUtilProperties *)extraParams {
  return EsGobAfirmaCoreSignersTriphaseUtil_prepareCertChainParamWithJavaSecurityCertCertificateArray_withJavaUtilProperties_(certChain, extraParams);
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x2, -1, -1, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x9, 0, 1, 2, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(init);
  methods[1].selector = @selector(prepareCertChainParamWithJavaSecurityCertCertificateArray:withJavaUtilProperties:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "INCLUDE_ONLY_SIGNNING_CERTIFICATE", "LNSString;", .constantValue.asLong = 0, 0x1a, -1, 3, -1, -1 },
    { "PARAM_NAME_CERT_SEPARATOR", "LNSString;", .constantValue.asLong = 0, 0x1a, -1, 4, -1, -1 },
  };
  static const void *ptrTable[] = { "prepareCertChainParam", "[LJavaSecurityCertCertificate;LJavaUtilProperties;", "LJavaSecurityCertCertificateEncodingException;", &EsGobAfirmaCoreSignersTriphaseUtil_INCLUDE_ONLY_SIGNNING_CERTIFICATE, &EsGobAfirmaCoreSignersTriphaseUtil_PARAM_NAME_CERT_SEPARATOR };
  static const J2ObjcClassInfo _EsGobAfirmaCoreSignersTriphaseUtil = { "TriphaseUtil", "es.gob.afirma.core.signers", ptrTable, methods, fields, 7, 0x11, 2, 2, -1, -1, -1, -1, -1 };
  return &_EsGobAfirmaCoreSignersTriphaseUtil;
}

@end


#line 31
void EsGobAfirmaCoreSignersTriphaseUtil_init(EsGobAfirmaCoreSignersTriphaseUtil *self) {
  NSObject_init(self);
}


#line 31
EsGobAfirmaCoreSignersTriphaseUtil *new_EsGobAfirmaCoreSignersTriphaseUtil_init() {
  J2OBJC_NEW_IMPL(EsGobAfirmaCoreSignersTriphaseUtil, init)
}


#line 31
EsGobAfirmaCoreSignersTriphaseUtil *create_EsGobAfirmaCoreSignersTriphaseUtil_init() {
  J2OBJC_CREATE_IMPL(EsGobAfirmaCoreSignersTriphaseUtil, init)
}


#line 43
NSString *EsGobAfirmaCoreSignersTriphaseUtil_prepareCertChainParamWithJavaSecurityCertCertificateArray_withJavaUtilProperties_(IOSObjectArray *certChain, JavaUtilProperties *extraParams) {
  EsGobAfirmaCoreSignersTriphaseUtil_initialize();
  
#line 44
  if (certChain == nil || certChain->size_ < 1) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(
#line 46
    @"La cadena de certificados no puede ser nula ni vacia");
  }
  
#line 49
  if (extraParams == nil || JavaLangBoolean_parseBooleanWithNSString_([extraParams getPropertyWithNSString:EsGobAfirmaCoreSignersTriphaseUtil_INCLUDE_ONLY_SIGNNING_CERTIFICATE withNSString:[((JavaLangBoolean *) nil_chk(JreLoadStatic(JavaLangBoolean, FALSE))) description]])) {
    return EsGobAfirmaCoreMiscBase64_encodeWithByteArray_withBoolean_([((JavaSecurityCertCertificate *) nil_chk(IOSObjectArray_Get(certChain, 0))) getEncoded], true);
  }
  JavaLangStringBuilder *sb = new_JavaLangStringBuilder_init();
  {
    IOSObjectArray *a__ =
#line 53
    certChain;
    JavaSecurityCertCertificate * const *b__ = a__->buffer_;
    JavaSecurityCertCertificate * const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      JavaSecurityCertCertificate *cert = *b__++;
      
#line 54
      (void) [sb appendWithNSString:EsGobAfirmaCoreMiscBase64_encodeWithByteArray_withBoolean_([((JavaSecurityCertCertificate *) nil_chk(cert)) getEncoded], true)];
      (void) [sb appendWithNSString:EsGobAfirmaCoreSignersTriphaseUtil_PARAM_NAME_CERT_SEPARATOR];
    }
  }
  
#line 57
  NSString *ret = [sb description];
  return [((NSString *) nil_chk(ret)) java_substring:0 endIndex:[ret java_length] - [((NSString *) nil_chk(EsGobAfirmaCoreSignersTriphaseUtil_PARAM_NAME_CERT_SEPARATOR)) java_length]];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(EsGobAfirmaCoreSignersTriphaseUtil)
